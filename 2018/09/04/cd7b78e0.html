<!DOCTYPE html>
<html lang="en">
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Redisçš„ä¸€äº›å¸¸è§çš„é—®é¢˜">
<meta property="og:type" content="article">
<meta property="og:title" content="RedisåŸºç¡€çŸ¥è¯†æ€»ç»“">
<meta property="og:url" content="https://www.cayzlh.com/blog">
<meta property="og:site_name" content="CAYZLH">
<meta property="og:description" content="Redisçš„ä¸€äº›å¸¸è§çš„é—®é¢˜">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-09-04T07:21:32.000Z">
<meta property="article:modified_time" content="2020-06-22T01:29:05.831Z">
<meta property="article:author" content="ğŸ³Antä¸¶">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="è½¬è½½">
<meta property="article:tag" content="Redis">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/blog/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/blog/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>RedisåŸºç¡€çŸ¥è¯†æ€»ç»“</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/blog/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/blog/css/rtl.css">

    
    <!-- rss -->
    
    
      <link rel="alternate" href="/blog/true" title="CAYZLH" type="application/atom+xml">
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        
          <li><a href="/blog/">Home</a></li>
        
          <li><a href="/blog/archives/">Articles</a></li>
        
          <li><a href="/blog/about/">About</a></li>
        
          <li><a href="/blog/search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/blog/2018/09/05/9753a2e.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/blog/2018/09/03/762945f0.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
<!--        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>-->
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous</span>
      <span id="i-next" class="info" style="display:none;">Next</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.facebook.com/sharer.php?u=https://www.cayzlh.com/2018/09/04/cd7b78e0.html"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://twitter.com/share?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&text=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.linkedin.com/shareArticle?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&is_video=false&description=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“&body=Check out this article: https://www.cayzlh.com/2018/09/04/cd7b78e0.html"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://getpocket.com/save?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://reddit.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.stumbleupon.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://digg.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.tumblr.com/share/link?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&name=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://news.ycombinator.com/submitlink?u=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&t=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFredis"><span class="toc-number">1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯redis?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reids%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">Reidsçš„ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8redis%E6%9C%89%E5%93%AA%E4%BA%9B%E5%A5%BD%E5%A4%84"><span class="toc-number">3.</span> <span class="toc-text">ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Java%E4%B8%AD%E5%AF%B9Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.</span> <span class="toc-text">Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#String"><span class="toc-number">4.1.1.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Hash"><span class="toc-number">4.1.2.</span> <span class="toc-text">Hash</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#List%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.3.</span> <span class="toc-text">Listæ“ä½œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Set%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.4.</span> <span class="toc-text">Setæ“ä½œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SortedSet-%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.5.</span> <span class="toc-text">SortedSet æ“ä½œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9B%B8%E6%AF%94memcached%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8A%BF"><span class="toc-number">5.</span> <span class="toc-text">redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memcache%E4%B8%8ERedis%E7%9A%84%E5%8C%BA%E5%88%AB%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">6.</span> <span class="toc-text">Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E5%B8%B8%E8%A7%81%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.</span> <span class="toc-text">rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mySQL%E9%87%8C%E6%9C%892000w%E6%95%B0%E6%8D%AE%EF%BC%8Credis%E4%B8%AD%E5%8F%AA%E5%AD%9820w%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81redis%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%83%BD%E6%98%AF%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">8.</span> <span class="toc-text">mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88redis%E9%9C%80%E8%A6%81%E6%8A%8A%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E6%94%BE%E5%88%B0%E5%86%85%E5%AD%98%E4%B8%AD"><span class="toc-number">9.</span> <span class="toc-text">ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E6%98%AF%E5%8D%95%E8%BF%9B%E7%A8%8B%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-number">10.</span> <span class="toc-text">Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9A%84%E5%B9%B6%E5%8F%91%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">11.</span> <span class="toc-text">redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">12.</span> <span class="toc-text">redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E7%85%A7%EF%BC%88snapshots%EF%BC%89"><span class="toc-number">12.1.</span> <span class="toc-text">å¿«ç…§ï¼ˆsnapshotsï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOF"><span class="toc-number">12.2.</span> <span class="toc-text">AOF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E6%96%B9%E5%BC%8F"><span class="toc-number">12.3.</span> <span class="toc-text">è™šæ‹Ÿå†…å­˜æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9A%84%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88%E7%AD%96%E7%95%A5%E5%92%8C%E4%B8%BB%E9%94%AE%E5%A4%B1%E6%95%88%E6%9C%BA%E5%88%B6"><span class="toc-number">13.</span> <span class="toc-text">redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%BD%B1%E5%93%8D%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="toc-number">13.1.</span> <span class="toc-text">1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">13.2.</span> <span class="toc-text">å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">13.3.</span> <span class="toc-text">æœ€å¤§ç¼“å­˜é…ç½®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">13.4.</span> <span class="toc-text">ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis-%E9%80%82%E5%90%88%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-number">14.</span> <span class="toc-text">redis é€‚åˆçš„åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E7%BC%93%E5%AD%98%EF%BC%88Session-Cache%EF%BC%89"><span class="toc-number">14.1.</span> <span class="toc-text">ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%A1%B5%E7%BC%93%E5%AD%98%EF%BC%88FPC%EF%BC%89"><span class="toc-number">14.2.</span> <span class="toc-text">å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%9F%E5%88%97"><span class="toc-number">14.3.</span> <span class="toc-text">é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E8%A1%8C%E6%A6%9C-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">14.4.</span> <span class="toc-text">æ’è¡Œæ¦œ&#x2F;è®¡æ•°å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85"><span class="toc-number">14.5.</span> <span class="toc-text">å‘å¸ƒ&#x2F;è®¢é˜…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">15.</span> <span class="toc-text">å‚è€ƒæ–‡çŒ®</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        RedisåŸºç¡€çŸ¥è¯†æ€»ç»“
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ğŸ³Antä¸¶</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-09-04T07:21:32.000Z" itemprop="datePublished">2018-09-04</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/blog/categories/%E8%BF%90%E7%BB%B4/">è¿ç»´</a> â€º <a class="category-link" href="/blog/categories/%E8%BF%90%E7%BB%B4/Redis/">Redis</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/blog/tags/Java/" rel="tag">Java</a>, <a class="tag-link-link" href="/blog/tags/Redis/" rel="tag">Redis</a>, <a class="tag-link-link" href="/blog/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">è½¬è½½</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="ä»€ä¹ˆæ˜¯redis"><a href="#ä»€ä¹ˆæ˜¯redis" class="headerlink" title="ä»€ä¹ˆæ˜¯redis?"></a>ä»€ä¹ˆæ˜¯redis?</h3><p>Redis æ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é«˜æ€§èƒ½key-valueæ•°æ®åº“ã€‚ </p>
<h3 id="Reidsçš„ç‰¹ç‚¹"><a href="#Reidsçš„ç‰¹ç‚¹" class="headerlink" title="Reidsçš„ç‰¹ç‚¹"></a>Reidsçš„ç‰¹ç‚¹</h3><p><code>Redis</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<code>Key-Value</code>ç±»å‹çš„å†…å­˜æ•°æ®åº“ï¼Œå¾ˆåƒ<code>memcached</code>ï¼Œæ•´ä¸ªæ•°æ®åº“ç»Ÿç»ŸåŠ è½½åœ¨å†…å­˜å½“ä¸­è¿›è¡Œæ“ä½œï¼Œå®šæœŸé€šè¿‡å¼‚æ­¥æ“ä½œæŠŠæ•°æ®åº“æ•°æ®flushåˆ°ç¡¬ç›˜ä¸Šè¿›è¡Œä¿å­˜ã€‚</p>
<p>å› ä¸ºæ˜¯çº¯å†…å­˜æ“ä½œï¼Œ<code>Redis</code>çš„æ€§èƒ½éå¸¸å‡ºè‰²ï¼Œæ¯ç§’å¯ä»¥å¤„ç†è¶…è¿‡ 10ä¸‡æ¬¡è¯»å†™æ“ä½œï¼Œæ˜¯å·²çŸ¥æ€§èƒ½æœ€å¿«çš„<code>Key-Value DB</code>ã€‚</p>
<p>Redisçš„å‡ºè‰²ä¹‹å¤„ä¸ä»…ä»…æ˜¯æ€§èƒ½ï¼ŒRedisæœ€å¤§çš„é­…åŠ›æ˜¯æ”¯æŒä¿å­˜å¤šç§æ•°æ®ç»“æ„ï¼Œæ­¤å¤–å•ä¸ªvalueçš„æœ€å¤§é™åˆ¶æ˜¯1GBï¼Œä¸åƒ memcachedåªèƒ½ä¿å­˜1MBçš„æ•°æ®ï¼Œå› æ­¤Rediså¯ä»¥ç”¨æ¥å®ç°å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ã€‚</p>
<p>æ¯”æ–¹è¯´ç”¨ä»–çš„Listæ¥åšFIFOåŒå‘é“¾è¡¨ï¼Œå®ç°ä¸€ä¸ªè½»é‡çº§çš„é«˜æ€§ èƒ½æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œç”¨ä»–çš„Setå¯ä»¥åšé«˜æ€§èƒ½çš„tagç³»ç»Ÿç­‰ç­‰ã€‚å¦å¤–Redisä¹Ÿå¯ä»¥å¯¹å­˜å…¥çš„Key-Valueè®¾ç½®expireæ—¶é—´ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è¢«å½“ä½œä¸€ ä¸ªåŠŸèƒ½åŠ å¼ºç‰ˆçš„memcachedæ¥ç”¨ã€‚</p>
<p>Redisçš„ä¸»è¦ç¼ºç‚¹æ˜¯æ•°æ®åº“å®¹é‡å—åˆ°ç‰©ç†å†…å­˜çš„é™åˆ¶ï¼Œä¸èƒ½ç”¨ä½œæµ·é‡æ•°æ®çš„é«˜æ€§èƒ½è¯»å†™ï¼Œå› æ­¤Redisé€‚åˆçš„åœºæ™¯ä¸»è¦å±€é™åœ¨è¾ƒå°æ•°æ®é‡çš„é«˜æ€§èƒ½æ“ä½œå’Œè¿ç®—ä¸Šã€‚</p>
<h3 id="ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„"><a href="#ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„" class="headerlink" title="ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„"></a>ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„</h3><ol>
<li>é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äºHashMapï¼ŒHashMapçš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1) </li>
<li>æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹ï¼Œæ”¯æŒstringï¼Œlistï¼Œsetï¼Œsorted setï¼Œhash </li>
<li>æ”¯æŒäº‹åŠ¡ï¼Œæ“ä½œéƒ½æ˜¯åŸå­æ€§ï¼Œæ‰€è°“çš„åŸå­æ€§å°±æ˜¯å¯¹æ•°æ®çš„æ›´æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ </li>
<li>ä¸°å¯Œçš„ç‰¹æ€§ï¼šå¯ç”¨äºç¼“å­˜ï¼Œæ¶ˆæ¯ï¼ŒæŒ‰keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåå°†ä¼šè‡ªåŠ¨åˆ é™¤</li>
</ol>
<h3 id="redis-æ”¯æŒå“ªäº›æ•°æ®ç»“æ„"><a href="#redis-æ”¯æŒå“ªäº›æ•°æ®ç»“æ„" class="headerlink" title="redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„"></a>redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„</h3><p>æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ï¼ˆStringï¼‰ï¼Œæ•£åˆ—ï¼ˆHashï¼‰ï¼Œåˆ—è¡¨ï¼ˆListï¼‰ï¼Œé›†åˆï¼ˆSetï¼‰ï¼Œæœ‰åºé›†åˆï¼ˆSorted Setæˆ–è€…æ˜¯ZSetï¼‰ä¸èŒƒå›´æŸ¥è¯¢ï¼ŒBitmapsï¼ŒHyperloglogs å’Œåœ°ç†ç©ºé—´ï¼ˆGeospatialï¼‰ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚å…¶ä¸­å¸¸è§çš„æ•°æ®ç»“æ„ç±»å‹æœ‰ï¼šStringã€Listã€Setã€Hashã€ZSetè¿™5ç§ã€‚</p>
<h4 id="Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ"><a href="#Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ" class="headerlink" title="Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ"></a>Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ</h4><h5 id="String"><a href="#String" class="headerlink" title="String"></a>String</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span>  Jedis jedis = JedisPoolUtil.getJedis();</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//æ·»åŠ å’Œè·å–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.set(<span class="string">&quot;num&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//åˆ é™¤å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.del(<span class="string">&quot;num&quot;</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//è‡ªå‡å’Œè‡ªå‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.set(<span class="string">&quot;num&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">        jedis.decr(<span class="string">&quot;num&quot;</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">        jedis.incr(<span class="string">&quot;num&quot;</span>);</span><br><span class="line">        jedis.incr(<span class="string">&quot;num&quot;</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//åŠ ä¸Š/å‡å» ä¸€ä¸ªæ•°</span></span><br><span class="line">    <span class="comment">//incrBy è¿”å›çš„æ˜¯ä¿®æ”¹ä¹‹åçš„å€¼å¦‚æœåŸå€¼æ˜¯å­—ç¬¦ä¸²ä¸æ˜¯æ•°å­—ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Long num = jedis.incrBy(<span class="string">&quot;num&quot;</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(num);</span><br><span class="line">        jedis.decrBy(<span class="string">&quot;num&quot;</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;num&quot;</span>));</span><br><span class="line">        jedis.set(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;caopengfei&quot;</span>);</span><br><span class="line">        <span class="comment">//jedis.decrBy(&quot;name&quot;,1);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Long len = jedis.append(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        System.out.println(len);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Jedis jedis = JedisPoolUtil.getJedis();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    hash æ“ä½œçš„æ˜¯mapå¯¹è±¡</span></span><br><span class="line"><span class="comment">//    é€‚åˆå­˜å‚¨é”®å€¼å¯¹è±¡çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//å­˜å€¼ å‚æ•°ç¬¬ä¸€ä¸ªå˜é‡çš„åç§°ï¼Œ mapé”®å(key)ï¼Œ mapé”®å€¼(value)</span></span><br><span class="line"><span class="comment">//    è°ƒç”¨hset</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Long num = jedis.hset(<span class="string">&quot;hash1&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;caopengfei&quot;</span>);</span><br><span class="line">        System.out.println(num);</span><br><span class="line">        String hget = jedis.hget(<span class="string">&quot;hash1&quot;</span>, <span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(hget);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//ä¹Ÿå¯ä»¥å­˜å¤šä¸ªkey</span></span><br><span class="line"><span class="comment">//    è°ƒç”¨hmset</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;caopengfei&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;25&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        String res = jedis.hmset(<span class="string">&quot;hash2&quot;</span>, map);</span><br><span class="line">        System.out.println(res);<span class="comment">//ok</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//è·å–hashä¸­æ‰€æœ‰çš„å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; map2 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map2 = jedis.hgetAll(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(map2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="comment">//    åˆ é™¤hashä¸­çš„é”® å¯ä»¥åˆ é™¤ä¸€ä¸ªä¹Ÿå¯ä»¥åˆ é™¤å¤šä¸ªï¼Œè¿”å›çš„æ˜¯åˆ é™¤çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Long num = jedis.hdel(<span class="string">&quot;hash2&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;age&quot;</span>);</span><br><span class="line">        System.out.println(num);</span><br><span class="line">        Map&lt;String, String&gt; map2 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map2 = jedis.hgetAll(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(map2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//å¢åŠ hashä¸­çš„é”®å€¼å¯¹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; map2 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map2 = jedis.hgetAll(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(map2);</span><br><span class="line">        jedis.hincrBy(<span class="string">&quot;hash2&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="number">10</span>);</span><br><span class="line">        map2 = jedis.hgetAll(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(map2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//åˆ¤æ–­hashæ˜¯å¦å­˜åœ¨æŸä¸ªå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(jedis.hexists(<span class="string">&quot;hash2&quot;</span>, <span class="string">&quot;username&quot;</span>));</span><br><span class="line">        System.out.println(jedis.hexists(<span class="string">&quot;hash2&quot;</span>, <span class="string">&quot;age&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//è·å–hashä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(jedis.hlen(<span class="string">&quot;hash2&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    è·å–ä¸€ä¸ªhashä¸­æ‰€æœ‰çš„keyå€¼</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Set&lt;String&gt; hash2 = jedis.hkeys(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(hash2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    è·å–æ‰€æœ‰çš„valueå€¼</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun8</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; hash2 = jedis.hvals(<span class="string">&quot;hash2&quot;</span>);</span><br><span class="line">        System.out.println(hash2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Listæ“ä½œ"><a href="#Listæ“ä½œ" class="headerlink" title="Listæ“ä½œ"></a>Listæ“ä½œ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testList</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    jedis.flushDB();</span><br><span class="line">    System.out.println(<span class="string">&quot;===========æ·»åŠ ä¸€ä¸ªlist===========&quot;</span>);</span><br><span class="line">    jedis.lpush(<span class="string">&quot;collections&quot;</span>, <span class="string">&quot;ArrayList&quot;</span>, <span class="string">&quot;Vector&quot;</span>, <span class="string">&quot;Stack&quot;</span>, <span class="string">&quot;HashMap&quot;</span>, <span class="string">&quot;WeakHashMap&quot;</span>, <span class="string">&quot;LinkedHashMap&quot;</span>);</span><br><span class="line">    jedis.lpush(<span class="string">&quot;collections&quot;</span>, <span class="string">&quot;HashSet&quot;</span>);</span><br><span class="line">    jedis.lpush(<span class="string">&quot;collections&quot;</span>, <span class="string">&quot;TreeSet&quot;</span>);</span><br><span class="line">    jedis.lpush(<span class="string">&quot;collections&quot;</span>, <span class="string">&quot;TreeMap&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));<span class="comment">//-1ä»£è¡¨å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ-2ä»£è¡¨å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ </span></span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsåŒºé—´0-3çš„å…ƒç´ ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>,<span class="number">0</span>,<span class="number">3</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ é™¤åˆ—è¡¨æŒ‡å®šçš„å€¼ ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆ é™¤çš„ä¸ªæ•°ï¼ˆæœ‰é‡å¤æ—¶ï¼‰ï¼Œåaddè¿›å»çš„å€¼å…ˆè¢«åˆ ï¼Œç±»ä¼¼äºå‡ºæ ˆ</span></span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤æŒ‡å®šå…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+jedis.lrem(<span class="string">&quot;collections&quot;</span>, <span class="number">2</span>, <span class="string">&quot;HashMap&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤ä¸‹è¡¨0-3åŒºé—´ä¹‹å¤–çš„å…ƒç´ ï¼š&quot;</span>+jedis.ltrim(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, <span class="number">3</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsåˆ—è¡¨å‡ºæ ˆï¼ˆå·¦ç«¯ï¼‰ï¼š&quot;</span>+jedis.lpop(<span class="string">&quot;collections&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsæ·»åŠ å…ƒç´ ï¼Œä»åˆ—è¡¨å³ç«¯ï¼Œä¸lpushç›¸å¯¹åº”ï¼š&quot;</span>+jedis.rpush(<span class="string">&quot;collections&quot;</span>, <span class="string">&quot;EnumMap&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsåˆ—è¡¨å‡ºæ ˆï¼ˆå³ç«¯ï¼‰ï¼š&quot;</span>+jedis.rpop(<span class="string">&quot;collections&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;ä¿®æ”¹collectionsæŒ‡å®šä¸‹æ ‡1çš„å†…å®¹ï¼š&quot;</span>+jedis.lset(<span class="string">&quot;collections&quot;</span>, <span class="number">1</span>, <span class="string">&quot;LinkedArrayList&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„å†…å®¹ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;collections&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;collectionsçš„é•¿åº¦ï¼š&quot;</span>+jedis.llen(<span class="string">&quot;collections&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;è·å–collectionsä¸‹æ ‡ä¸º2çš„å…ƒç´ ï¼š&quot;</span>+jedis.lindex(<span class="string">&quot;collections&quot;</span>, <span class="number">2</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line">    jedis.lpush(<span class="string">&quot;sortedList&quot;</span>, <span class="string">&quot;3&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;4&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;sortedListæ’åºå‰ï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;sortedList&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">    System.out.println(jedis.sort(<span class="string">&quot;sortedList&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;sortedListæ’åºåï¼š&quot;</span>+jedis.lrange(<span class="string">&quot;sortedList&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Setæ“ä½œ"><a href="#Setæ“ä½œ" class="headerlink" title="Setæ“ä½œ"></a>Setæ“ä½œ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Seté›†åˆï¼Œå’ŒListç±»çš„åŒºåˆ«å°±æ˜¯</span></span><br><span class="line"><span class="comment">* setä¸­ä¸ä¼šå‡ºç°é‡å¤çš„æ•°æ®</span></span><br><span class="line"><span class="comment">* ä»–å¯ä»¥è¿›è¡Œèšåˆæ“ä½œæ•ˆç‡æ¯”è¾ƒé«˜</span></span><br><span class="line"><span class="comment">* å…¶ä½™çš„æ“ä½œåŸºæœ¬ä¸Šå’Œlistç›¸åŒ</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span>  Jedis jedis = JedisPoolUtil.getJedis();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">/*æ·»åŠ å…ƒç´ åˆ é™¤å…ƒç´ */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Long num = jedis.sadd(<span class="string">&quot;myset&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>,<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        System.out.println(num);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">/*è·å¾—å…ƒç´ */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Set&lt;String&gt; myset = jedis.smembers(<span class="string">&quot;myset&quot;</span>);</span><br><span class="line">        System.out.println(myset);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">/*ç§»é™¤å…ƒç´ */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.srem(<span class="string">&quot;myset&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        Set&lt;String&gt; myset = jedis.smembers(<span class="string">&quot;myset&quot;</span>);</span><br><span class="line">        System.out.println(myset);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦è¿™ä¸ªsetä¸­å­˜åœ¨æŸä¸ªå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Boolean sismember = jedis.sismember(<span class="string">&quot;myset&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">        System.out.println(sismember);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//è·å¾—A-B è·å¾—å·®é›†åˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.sadd(<span class="string">&quot;myset1&quot;</span>,<span class="string">&quot;123&quot;</span>,<span class="string">&quot;32&quot;</span>,<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;def&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;sdfasd&quot;</span>);</span><br><span class="line">        jedis.sadd(<span class="string">&quot;myset2&quot;</span>,<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;345&quot;</span>,<span class="string">&quot;123&quot;</span>,<span class="string">&quot;fda&quot;</span>);</span><br><span class="line">        Set&lt;String&gt; sdiff = jedis.sdiff(<span class="string">&quot;myset1&quot;</span>, <span class="string">&quot;myset2&quot;</span>);</span><br><span class="line">        System.out.println(sdiff);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//è·å¾—äº¤é›†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun5</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Set&lt;String&gt; sinter = jedis.sinter(<span class="string">&quot;myset1&quot;</span>, <span class="string">&quot;myset2&quot;</span>);</span><br><span class="line">        System.out.println(sinter);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="comment">//    è·å¾—å¹¶é›†åˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun6</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Set&lt;String&gt; sunion = jedis.sunion(<span class="string">&quot;myset1&quot;</span>, <span class="string">&quot;myset2&quot;</span>);</span><br><span class="line">        System.out.println(sunion);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="comment">//    æˆå‘˜æ•°é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun7</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(jedis.scard(<span class="string">&quot;myset1&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="comment">//    è·å¾—éšæœºçš„ä¸€ä¸ªæˆå‘˜</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun8</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(jedis.srandmember(<span class="string">&quot;myset1&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="comment">//    å°†ç›¸å·®çš„æˆå‘˜æ”¾åˆ°ä¸€ä¸ªæ–°çš„setä¸­åŒç†äº¤é›†å’Œå¹¶é›†éƒ½å¯ä»¥åé¢å‡</span></span><br><span class="line"><span class="comment">//    åŠ ä¸Šä¸€ä¸ªstoreå³å¯</span></span><br><span class="line"><span class="comment">//    å¹¶è¿”å›æ–°çš„é•¿åº¦</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun9</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(jedis.sdiffstore(<span class="string">&quot;myset3&quot;</span>,<span class="string">&quot;myset1&quot;</span>,<span class="string">&quot;myset2&quot;</span>));</span><br><span class="line">        System.out.println(jedis.smembers(<span class="string">&quot;myset3&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="SortedSet-æ“ä½œ"><a href="#SortedSet-æ“ä½œ" class="headerlink" title="SortedSet æ“ä½œ"></a>SortedSet æ“ä½œ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å’Œsetæä¸ºçš„ç±»ä¼¼ï¼Œä»–ä»¬æ˜¯å­—ç¬¦ä¸²çš„é›†åˆï¼Œæ²¡æœ‰é‡å¤çš„æ•°æ®</span></span><br><span class="line"><span class="comment">å·®åˆ«æ˜¯sortedsetæ¯ä¸ªæˆå‘˜ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ä¸ä¹‹å…³è”</span></span><br><span class="line"><span class="comment">ï¼Œredisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åº</span></span><br><span class="line"><span class="comment">sortedsetä¸­æ•°æ®å¿…é¡»å•ä¸€ä½†æ˜¯ä»–çš„scoreå¯ä»¥æ˜¯é‡å¤çš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortedsetTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span>  Jedis jedis = JedisPoolUtil.getJedis();</span><br><span class="line"><span class="comment">//    æ·»åŠ å…ƒç´ </span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">        jedis.zadd(<span class="string">&quot;mysort&quot;</span>,<span class="number">100.0</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        jedis.zadd(<span class="string">&quot;mysort&quot;</span>,<span class="number">200.0</span>,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        jedis.zadd(<span class="string">&quot;mysort&quot;</span>,<span class="number">50.0</span>,<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        Map&lt;String ,Double&gt;map = <span class="keyword">new</span> HashMap&lt;String ,Double&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;mutouliu&quot;</span>,<span class="number">70.0</span>);</span><br><span class="line"></span><br><span class="line">        jedis.zadd(<span class="string">&quot;mysort&quot;</span>,map);</span><br><span class="line">        Set&lt;String&gt; mysort = jedis.zrange(<span class="string">&quot;mysort&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(mysort);</span><br><span class="line">        Set&lt;String&gt; mysort1 = jedis.zrange(<span class="string">&quot;mysort&quot;</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(mysort1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿"><a href="#redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿" class="headerlink" title="redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿"></a>redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿</h3><ol>
<li>memcachedæ‰€æœ‰çš„å€¼å‡æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œredisä½œä¸ºå…¶æ›¿ä»£è€…ï¼Œæ”¯æŒæ›´ä¸ºä¸°å¯Œçš„æ•°æ®ç±»å‹ </li>
<li>redisçš„é€Ÿåº¦æ¯”memcachedå¿«å¾ˆå¤š</li>
<li>rediså¯ä»¥æŒä¹…åŒ–å…¶æ•°æ®</li>
</ol>
<h3 id="Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›"><a href="#Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›" class="headerlink" title="Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›"></a>Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›</h3><ol>
<li>å­˜å‚¨æ–¹å¼ MemecacheæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚ Redisæœ‰éƒ¨ä»½å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚ </li>
<li>æ•°æ®æ”¯æŒç±»å‹ Memcacheå¯¹æ•°æ®ç±»å‹æ”¯æŒç›¸å¯¹ç®€å•ã€‚ Redisæœ‰å¤æ‚çš„æ•°æ®ç±»å‹ã€‚ </li>
<li>ä½¿ç”¨åº•å±‚æ¨¡å‹ä¸åŒ å®ƒä»¬ä¹‹é—´åº•å±‚å®ç°æ–¹å¼ ä»¥åŠä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡çš„åº”ç”¨åè®®ä¸ä¸€æ ·ã€‚ Redisç›´æ¥è‡ªå·±æ„å»ºäº†VM æœºåˆ¶ ï¼Œå› ä¸ºä¸€èˆ¬çš„ç³»ç»Ÿè°ƒç”¨ç³»ç»Ÿå‡½æ•°çš„è¯ï¼Œä¼šæµªè´¹ä¸€å®šçš„æ—¶é—´å»ç§»åŠ¨å’Œè¯·æ±‚ã€‚ </li>
</ol>
<h3 id="rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:"></a>rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:</h3><ol>
<li>Masterå†™å†…å­˜å¿«ç…§ï¼Œsaveå‘½ä»¤è°ƒåº¦rdbSaveå‡½æ•°ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œå½“å¿«ç…§æ¯”è¾ƒå¤§æ—¶å¯¹æ€§èƒ½å½±å“æ˜¯éå¸¸å¤§çš„ï¼Œä¼šé—´æ–­æ€§æš‚åœæœåŠ¡ï¼Œæ‰€ä»¥Masteræœ€å¥½ä¸è¦å†™å†…å­˜å¿«ç…§ã€‚</li>
<li>Master AOFæŒä¹…åŒ–ï¼Œå¦‚æœä¸é‡å†™AOFæ–‡ä»¶ï¼Œè¿™ä¸ªæŒä¹…åŒ–æ–¹å¼å¯¹æ€§èƒ½çš„å½±å“æ˜¯æœ€å°çš„ï¼Œä½†æ˜¯AOFæ–‡ä»¶ä¼šä¸æ–­å¢å¤§ï¼ŒAOFæ–‡ä»¶è¿‡å¤§ä¼šå½±å“Masteré‡å¯çš„æ¢å¤é€Ÿåº¦ã€‚Masteræœ€å¥½ä¸è¦åšä»»ä½•æŒä¹…åŒ–å·¥ä½œï¼ŒåŒ…æ‹¬å†…å­˜å¿«ç…§å’ŒAOFæ—¥å¿—æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä¸è¦å¯ç”¨å†…å­˜å¿«ç…§åšæŒä¹…åŒ–,å¦‚æœæ•°æ®æ¯”è¾ƒå…³é”®ï¼ŒæŸä¸ªSlaveå¼€å¯AOFå¤‡ä»½æ•°æ®ï¼Œç­–ç•¥ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ã€‚</li>
<li>Masterè°ƒç”¨BGREWRITEAOFé‡å†™AOFæ–‡ä»¶ï¼ŒAOFåœ¨é‡å†™çš„æ—¶å€™ä¼šå å¤§é‡çš„CPUå’Œå†…å­˜èµ„æºï¼Œå¯¼è‡´æœåŠ¡loadè¿‡é«˜ï¼Œå‡ºç°çŸ­æš‚æœåŠ¡æš‚åœç°è±¡ã€‚</li>
<li>Redisä¸»ä»å¤åˆ¶çš„æ€§èƒ½é—®é¢˜ï¼Œä¸ºäº†ä¸»ä»å¤åˆ¶çš„é€Ÿåº¦å’Œè¿æ¥çš„ç¨³å®šæ€§ï¼ŒSlaveå’ŒMasteræœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…</li>
</ol>
<h3 id="mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®"><a href="#mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®" class="headerlink" title="mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®"></a>mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®</h3><blockquote>
<p><em>redis å†…å­˜æ•°æ®é›†å¤§å°ä¸Šå‡åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šæ–½è¡Œæ•°æ®æ·˜æ±°ç­–ç•¥ï¼ˆå›æ”¶ç­–ç•¥ï¼‰ã€‚</em></p>
</blockquote>
<p><strong>redis æä¾› 6ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</strong></p>
<ol>
<li>volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li>
<li>volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</li>
<li>volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li>
<li>allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li>
<li>allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li>
<li>no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­"><a href="#ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­" class="headerlink" title="ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­"></a>ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­</h3><p>Redisä¸ºäº†è¾¾åˆ°æœ€å¿«çš„è¯»å†™é€Ÿåº¦å°†æ•°æ®éƒ½è¯»åˆ°å†…å­˜ä¸­ï¼Œå¹¶é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å°†æ•°æ®å†™å…¥ç£ç›˜ã€‚æ‰€ä»¥rediså…·æœ‰å¿«é€Ÿå’Œæ•°æ®æŒä¹…åŒ–çš„ç‰¹å¾ã€‚å¦‚æœä¸å°†æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œç£ç›˜I/Oé€Ÿåº¦ä¸ºä¸¥é‡å½±å“redisçš„æ€§èƒ½ã€‚åœ¨å†…å­˜è¶Šæ¥è¶Šä¾¿å®œçš„ä»Šå¤©ï¼Œrediså°†ä¼šè¶Šæ¥è¶Šå—æ¬¢è¿ã€‚</p>
<p><strong>å¦‚æœè®¾ç½®äº†æœ€å¤§ä½¿ç”¨çš„å†…å­˜ï¼Œåˆ™æ•°æ®å·²æœ‰è®°å½•æ•°è¾¾åˆ°å†…å­˜é™å€¼åä¸èƒ½ç»§ç»­æ’å…¥æ–°å€¼ã€‚</strong></p>
<h3 id="Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„"><a href="#Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„" class="headerlink" title="Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„"></a>Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„</h3><p>redisåˆ©ç”¨é˜Ÿåˆ—æŠ€æœ¯å°†å¹¶å‘è®¿é—®å˜ä¸ºä¸²è¡Œè®¿é—®ï¼Œæ¶ˆé™¤äº†ä¼ ç»Ÿæ•°æ®åº“ä¸²è¡Œæ§åˆ¶çš„å¼€é”€</p>
<h3 id="redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³"><a href="#redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³" class="headerlink" title="redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³"></a>redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³</h3><p>Redisä¸ºå•è¿›ç¨‹å•çº¿ç¨‹æ¨¡å¼ï¼Œé‡‡ç”¨é˜Ÿåˆ—æ¨¡å¼å°†å¹¶å‘è®¿é—®å˜ä¸ºä¸²è¡Œè®¿é—®ã€‚Redisæœ¬èº«æ²¡æœ‰é”çš„æ¦‚å¿µï¼ŒRediså¯¹äºå¤šä¸ªå®¢æˆ·ç«¯è¿æ¥å¹¶ä¸å­˜åœ¨ç«äº‰ï¼Œä½†æ˜¯åœ¨Jediså®¢æˆ·ç«¯å¯¹Redisè¿›è¡Œå¹¶å‘è®¿é—®æ—¶ä¼šå‘ç”Ÿè¿æ¥è¶…æ—¶ã€æ•°æ®è½¬æ¢é”™è¯¯ã€é˜»å¡ã€å®¢æˆ·ç«¯å…³é—­è¿æ¥ç­‰é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å‡æ˜¯ç”±äºå®¢æˆ·ç«¯è¿æ¥æ··ä¹±é€ æˆã€‚</p>
<p><strong>å¯¹æ­¤æœ‰2ç§è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>1.å®¢æˆ·ç«¯è§’åº¦ï¼Œä¸ºä¿è¯æ¯ä¸ªå®¢æˆ·ç«¯é—´æ­£å¸¸æœ‰åºä¸Redisè¿›è¡Œé€šä¿¡ï¼Œå¯¹è¿æ¥è¿›è¡Œæ± åŒ–ï¼ŒåŒæ—¶å¯¹å®¢æˆ·ç«¯è¯»å†™Redisæ“ä½œé‡‡ç”¨å†…éƒ¨é”synchronizedã€‚</p>
<p>2.æœåŠ¡å™¨è§’åº¦ï¼Œåˆ©ç”¨setnxå®ç°é”ã€‚</p>
<blockquote>
<p> <em>æ³¨ï¼šå¯¹äºç¬¬ä¸€ç§ï¼Œéœ€è¦åº”ç”¨ç¨‹åºè‡ªå·±å¤„ç†èµ„æºçš„åŒæ­¥ï¼Œå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•æ¯”è¾ƒé€šä¿—ï¼Œå¯ä»¥ä½¿ç”¨synchronizedä¹Ÿå¯ä»¥ä½¿ç”¨lockï¼›ç¬¬äºŒç§éœ€è¦ç”¨åˆ°Redisçš„setnxå‘½ä»¤ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ä¸€äº›é—®é¢˜ã€‚</em></p>
</blockquote>
<h3 id="redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼"><a href="#redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼" class="headerlink" title="redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼"></a>redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼</h3><h4 id="å¿«ç…§ï¼ˆsnapshotsï¼‰"><a href="#å¿«ç…§ï¼ˆsnapshotsï¼‰" class="headerlink" title="å¿«ç…§ï¼ˆsnapshotsï¼‰"></a><strong>å¿«ç…§ï¼ˆsnapshotsï¼‰</strong></h4><p>ç¼ºçœæƒ…å†µæƒ…å†µä¸‹ï¼ŒRedisæŠŠæ•°æ®å¿«ç…§å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶åä¸ºdump.rdbã€‚ä½ å¯ä»¥é…ç½®Redisçš„æŒä¹…åŒ–ç­–ç•¥ï¼Œä¾‹å¦‚æ•°æ®é›†ä¸­æ¯Nç§’é’Ÿæœ‰è¶…è¿‡Mæ¬¡æ›´æ–°ï¼Œå°±å°†æ•°æ®å†™å…¥ç£ç›˜ï¼›æˆ–è€…ä½ å¯ä»¥æ‰‹å·¥è°ƒç”¨å‘½ä»¤SAVEæˆ–BGSAVEã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong></p>
<ul>
<li>Redis forks.</li>
<li>å­è¿›ç¨‹å¼€å§‹å°†æ•°æ®å†™åˆ°ä¸´æ—¶RDBæ–‡ä»¶ä¸­ã€‚</li>
<li>å½“å­è¿›ç¨‹å®Œæˆå†™RDBæ–‡ä»¶ï¼Œç”¨æ–°æ–‡ä»¶æ›¿æ¢è€æ–‡ä»¶ã€‚</li>
<li>è¿™ç§æ–¹å¼å¯ä»¥ä½¿Redisä½¿ç”¨copy-on-writeæŠ€æœ¯ã€‚</li>
</ul>
<h4 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a><strong>AOF</strong></h4><p>å¿«ç…§æ¨¡å¼å¹¶ä¸ååˆ†å¥å£®ï¼Œå½“ç³»ç»Ÿåœæ­¢ï¼Œæˆ–è€…æ— æ„ä¸­Redisè¢«killæ‰ï¼Œæœ€åå†™å…¥Redisçš„æ•°æ®å°±ä¼šä¸¢å¤±ã€‚</p>
<p>è¿™å¯¹æŸäº›åº”ç”¨ä¹Ÿè®¸ä¸æ˜¯å¤§é—®é¢˜ï¼Œä½†å¯¹äºè¦æ±‚é«˜å¯é æ€§çš„åº”ç”¨æ¥è¯´ï¼ŒRediså°±ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚Append-onlyæ–‡ä»¶æ¨¡å¼æ˜¯å¦ä¸€ç§é€‰æ‹©ã€‚ä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰“å¼€AOFæ¨¡å¼</p>
<h4 id="è™šæ‹Ÿå†…å­˜æ–¹å¼"><a href="#è™šæ‹Ÿå†…å­˜æ–¹å¼" class="headerlink" title="è™šæ‹Ÿå†…å­˜æ–¹å¼"></a><strong>è™šæ‹Ÿå†…å­˜æ–¹å¼</strong></h4><p>å½“ä½ çš„keyå¾ˆå°è€Œvalueå¾ˆå¤§æ—¶,ä½¿ç”¨VMçš„æ•ˆæœä¼šæ¯”è¾ƒå¥½.å› ä¸ºè¿™æ ·èŠ‚çº¦çš„å†…å­˜æ¯”è¾ƒå¤§.</p>
<p>å½“ä½ çš„keyä¸å°æ—¶,å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€äº›éå¸¸æ–¹æ³•å°†å¾ˆå¤§çš„keyå˜æˆå¾ˆå¤§çš„value,æ¯”å¦‚ä½ å¯ä»¥è€ƒè™‘å°†key,valueç»„åˆæˆä¸€ä¸ªæ–°çš„value.</p>
<p>vm-max-threadsè¿™ä¸ªå‚æ•°,å¯ä»¥è®¾ç½®è®¿é—®swapæ–‡ä»¶çš„çº¿ç¨‹æ•°,è®¾ç½®æœ€å¥½ä¸è¦è¶…è¿‡æœºå™¨çš„æ ¸æ•°,å¦‚æœè®¾ç½®ä¸º0,é‚£ä¹ˆæ‰€æœ‰å¯¹swapæ–‡ä»¶çš„æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„.å¯èƒ½ä¼šé€ æˆæ¯”è¾ƒé•¿æ—¶é—´çš„å»¶è¿Ÿ,ä½†æ˜¯å¯¹æ•°æ®å®Œæ•´æ€§æœ‰å¾ˆå¥½çš„ä¿è¯.</p>
<p>è‡ªå·±æµ‹è¯•çš„æ—¶å€™å‘ç°ç”¨è™šæ‹Ÿå†…å­˜æ€§èƒ½ä¹Ÿä¸é”™ã€‚å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¯ä»¥è€ƒè™‘åˆ†å¸ƒå¼æˆ–è€…å…¶ä»–æ•°æ®åº“ã€‚</p>
<h3 id="redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶"><a href="#redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶" class="headerlink" title="redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶"></a><strong>redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶</strong></h3><p>ä½œä¸ºç¼“å­˜ç³»ç»Ÿéƒ½è¦å®šæœŸæ¸…ç†æ— æ•ˆæ•°æ®ï¼Œå°±éœ€è¦ä¸€ä¸ªä¸»é”®å¤±æ•ˆå’Œæ·˜æ±°ç­–ç•¥.</p>
<p>åœ¨Rediså½“ä¸­ï¼Œæœ‰ç”Ÿå­˜æœŸçš„keyè¢«ç§°ä¸ºvolatileã€‚åœ¨åˆ›å»ºç¼“å­˜æ—¶ï¼Œè¦ä¸ºç»™å®šçš„keyè®¾ç½®ç”Ÿå­˜æœŸï¼Œå½“keyè¿‡æœŸçš„æ—¶å€™ï¼ˆç”Ÿå­˜æœŸä¸º0ï¼‰ï¼Œå®ƒå¯èƒ½ä¼šè¢«åˆ é™¤ã€‚</p>
<h4 id="1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ"><a href="#1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ" class="headerlink" title="1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ"></a><strong>1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ</strong></h4><p>ç”Ÿå­˜æ—¶é—´å¯ä»¥é€šè¿‡ä½¿ç”¨ DEL å‘½ä»¤æ¥åˆ é™¤æ•´ä¸ª key æ¥ç§»é™¤ï¼Œæˆ–è€…è¢« SET å’Œ GETSET å‘½ä»¤è¦†ç›–åŸæ¥çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®æ”¹keyå¯¹åº”çš„valueå’Œä½¿ç”¨å¦å¤–ç›¸åŒçš„keyå’Œvalueæ¥è¦†ç›–ä»¥åï¼Œå½“å‰æ•°æ®çš„ç”Ÿå­˜æ—¶é—´ä¸åŒã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œå¯¹ä¸€ä¸ª key æ‰§è¡ŒINCRå‘½ä»¤ï¼Œå¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡ŒLPUSHå‘½ä»¤ï¼Œæˆ–è€…å¯¹ä¸€ä¸ªå“ˆå¸Œè¡¨æ‰§è¡ŒHSETå‘½ä»¤ï¼Œè¿™ç±»æ“ä½œéƒ½ä¸ä¼šä¿®æ”¹ key æœ¬èº«çš„ç”Ÿå­˜æ—¶é—´ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½¿ç”¨RENAMEå¯¹ä¸€ä¸ª key è¿›è¡Œæ”¹åï¼Œé‚£ä¹ˆæ”¹ååçš„ keyçš„ç”Ÿå­˜æ—¶é—´å’Œæ”¹åå‰ä¸€æ ·ã€‚</p>
<p>RENAMEå‘½ä»¤çš„å¦ä¸€ç§å¯èƒ½æ˜¯ï¼Œå°è¯•å°†ä¸€ä¸ªå¸¦ç”Ÿå­˜æ—¶é—´çš„ key æ”¹åæˆå¦ä¸€ä¸ªå¸¦ç”Ÿå­˜æ—¶é—´çš„ another_key ï¼Œè¿™æ—¶æ—§çš„ another_key (ä»¥åŠå®ƒçš„ç”Ÿå­˜æ—¶é—´)ä¼šè¢«åˆ é™¤ï¼Œç„¶åæ—§çš„ key ä¼šæ”¹åä¸º another_key ï¼Œå› æ­¤ï¼Œæ–°çš„ another_key çš„ç”Ÿå­˜æ—¶é—´ä¹Ÿå’ŒåŸæœ¬çš„ key ä¸€æ ·ã€‚ä½¿ç”¨PERSISTå‘½ä»¤å¯ä»¥åœ¨ä¸åˆ é™¤ key çš„æƒ…å†µä¸‹ï¼Œç§»é™¤ key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè®© key é‡æ–°æˆä¸ºä¸€ä¸ªpersistent key ã€‚</p>
<h4 id="å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´"><a href="#å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´" class="headerlink" title="å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´"></a><strong>å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´</strong></h4><p>å¯ä»¥å¯¹ä¸€ä¸ªå·²ç»å¸¦æœ‰ç”Ÿå­˜æ—¶é—´çš„ key æ‰§è¡ŒEXPIREå‘½ä»¤ï¼Œæ–°æŒ‡å®šçš„ç”Ÿå­˜æ—¶é—´ä¼šå–ä»£æ—§çš„ç”Ÿå­˜æ—¶é—´ã€‚è¿‡æœŸæ—¶é—´çš„ç²¾åº¦å·²ç»è¢«æ§åˆ¶åœ¨1msä¹‹å†…ï¼Œä¸»é”®å¤±æ•ˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆ1ï¼‰ï¼ŒEXPIREå’ŒTTLå‘½ä»¤æ­é…ä½¿ç”¨ï¼ŒTTLå¯ä»¥æŸ¥çœ‹keyçš„å½“å‰ç”Ÿå­˜æ—¶é—´ã€‚è®¾ç½®æˆåŠŸè¿”å› 1ï¼›å½“ key ä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸º key è®¾ç½®ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å› 0 ã€‚</p>
<h4 id="æœ€å¤§ç¼“å­˜é…ç½®ï¼š"><a href="#æœ€å¤§ç¼“å­˜é…ç½®ï¼š" class="headerlink" title="æœ€å¤§ç¼“å­˜é…ç½®ï¼š"></a><strong>æœ€å¤§ç¼“å­˜é…ç½®ï¼š</strong></h4><p>åœ¨ redis ä¸­ï¼Œå…è®¸ç”¨æˆ·è®¾ç½®æœ€å¤§ä½¿ç”¨å†…å­˜å¤§å°ï¼Œserver.maxmemoryé»˜è®¤ä¸º0ï¼Œæ²¡æœ‰æŒ‡å®šæœ€å¤§ç¼“å­˜ï¼Œå¦‚æœæœ‰æ–°çš„æ•°æ®æ·»åŠ ï¼Œè¶…è¿‡æœ€å¤§å†…å­˜ï¼Œåˆ™ä¼šä½¿rediså´©æºƒï¼Œæ‰€ä»¥ä¸€å®šè¦è®¾ç½®ã€‚redis å†…å­˜æ•°æ®é›†å¤§å°ä¸Šå‡åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šå®è¡Œæ•°æ®æ·˜æ±°ç­–ç•¥ã€‚</p>
<p><strong>redis æä¾› 6ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</strong></p>
<ol>
<li>volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li>
<li>volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</li>
<li> volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li>
<li>allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li>
<li>allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li>
<li>no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®</li>
</ol>
<p>æ³¨æ„è¿™é‡Œçš„6ç§æœºåˆ¶ï¼Œvolatileå’Œallkeysè§„å®šäº†æ˜¯å¯¹å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†æ·˜æ±°æ•°æ®è¿˜æ˜¯ä»å…¨éƒ¨æ•°æ®é›†æ·˜æ±°æ•°æ®ï¼Œåé¢çš„lruã€ttlä»¥åŠrandomæ˜¯ä¸‰ç§ä¸åŒçš„æ·˜æ±°ç­–ç•¥ï¼Œå†åŠ ä¸Šä¸€ç§no-envictionæ°¸ä¸å›æ”¶çš„ç­–ç•¥ã€‚</p>
<p><strong>ä½¿ç”¨ç­–ç•¥è§„åˆ™ï¼š</strong></p>
<ol>
<li>å¦‚æœæ•°æ®å‘ˆç°å¹‚å¾‹åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯ä¸€éƒ¨åˆ†æ•°æ®è®¿é—®é¢‘ç‡é«˜ï¼Œä¸€éƒ¨åˆ†æ•°æ®è®¿é—®é¢‘ç‡ä½ï¼Œåˆ™ä½¿ç”¨allkeys-lru</li>
<li>å¦‚æœæ•°æ®å‘ˆç°å¹³ç­‰åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„æ•°æ®è®¿é—®é¢‘ç‡éƒ½ç›¸åŒï¼Œåˆ™ä½¿ç”¨allkeys-random</li>
</ol>
<h4 id="ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š"><a href="#ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š" class="headerlink" title="ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š"></a><strong>ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</strong></h4><p>ttlå’Œrandomæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå®ç°ä¹Ÿä¼šæ¯”è¾ƒç®€å•ã€‚ä¸»è¦æ˜¯Lruæœ€è¿‘æœ€å°‘ä½¿ç”¨æ·˜æ±°ç­–ç•¥ï¼Œè®¾è®¡ä¸Šä¼šå¯¹key æŒ‰å¤±æ•ˆæ—¶é—´æ’åºï¼Œç„¶åå–æœ€å…ˆå¤±æ•ˆçš„keyè¿›è¡Œæ·˜æ±°</p>
<h3 id="redis-é€‚åˆçš„åœºæ™¯"><a href="#redis-é€‚åˆçš„åœºæ™¯" class="headerlink" title="redis é€‚åˆçš„åœºæ™¯"></a><strong>redis é€‚åˆçš„åœºæ™¯</strong></h3><p>Redisæœ€é€‚åˆæ‰€æœ‰æ•°æ®in-momoryçš„åœºæ™¯ï¼Œè™½ç„¶Redisä¹Ÿæä¾›æŒä¹…åŒ–åŠŸèƒ½ï¼Œä½†å®é™…æ›´å¤šçš„æ˜¯ä¸€ä¸ªdisk-backedçš„åŠŸèƒ½ï¼Œè·Ÿä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æŒä¹…åŒ–æœ‰æ¯”è¾ƒå¤§çš„å·®åˆ«ï¼Œé‚£ä¹ˆå¯èƒ½å¤§å®¶å°±ä¼šæœ‰ç–‘é—®ï¼Œä¼¼ä¹Redisæ›´åƒä¸€ä¸ªåŠ å¼ºç‰ˆçš„Memcachedï¼Œé‚£ä¹ˆä½•æ—¶ä½¿ç”¨Memcachedï¼Œä½•æ—¶ä½¿ç”¨Rediså‘¢?</p>
<p>å¦‚æœç®€å•åœ°æ¯”è¾ƒRedisä¸Memcachedçš„åŒºåˆ«ï¼Œå¤§å¤šæ•°éƒ½ä¼šå¾—åˆ°ä»¥ä¸‹è§‚ç‚¹ï¼š</p>
<ol>
<li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„k/vç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li>
<li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li>
<li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li>
</ol>
<h4 id="ä¼šè¯ç¼“å­˜ï¼ˆSession-Cacheï¼‰"><a href="#ä¼šè¯ç¼“å­˜ï¼ˆSession-Cacheï¼‰" class="headerlink" title="ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰"></a><strong>ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰</strong></h4><p>æœ€å¸¸ç”¨çš„ä¸€ç§ä½¿ç”¨Redisçš„æƒ…æ™¯æ˜¯ä¼šè¯ç¼“å­˜ï¼ˆsession cacheï¼‰ã€‚ç”¨Redisç¼“å­˜ä¼šè¯æ¯”å…¶ä»–å­˜å‚¨ï¼ˆå¦‚Memcachedï¼‰çš„ä¼˜åŠ¿åœ¨äºï¼šRedisæä¾›æŒä¹…åŒ–ã€‚å½“ç»´æŠ¤ä¸€ä¸ªä¸æ˜¯ä¸¥æ ¼è¦æ±‚ä¸€è‡´æ€§çš„ç¼“å­˜æ—¶ï¼Œå¦‚æœç”¨æˆ·çš„è´­ç‰©è½¦ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šä¸é«˜å…´çš„ï¼Œç°åœ¨ï¼Œä»–ä»¬è¿˜ä¼šè¿™æ ·å—ï¼Ÿ</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œéšç€ Redis è¿™äº›å¹´çš„æ”¹è¿›ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°æ€ä¹ˆæ°å½“çš„ä½¿ç”¨Redisæ¥ç¼“å­˜ä¼šè¯çš„æ–‡æ¡£ã€‚ç”šè‡³å¹¿ä¸ºäººçŸ¥çš„å•†ä¸šå¹³å°Magentoä¹Ÿæä¾›Redisçš„æ’ä»¶ã€‚</p>
<h4 id="å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰"><a href="#å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰" class="headerlink" title="å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰"></a><strong>å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰</strong></h4><p>é™¤åŸºæœ¬çš„ä¼šè¯tokenä¹‹å¤–ï¼ŒRedisè¿˜æä¾›å¾ˆç®€ä¾¿çš„FPCå¹³å°ã€‚å›åˆ°ä¸€è‡´æ€§é—®é¢˜ï¼Œå³ä½¿é‡å¯äº†Rediså®ä¾‹ï¼Œå› ä¸ºæœ‰ç£ç›˜çš„æŒä¹…åŒ–ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹åˆ°é¡µé¢åŠ è½½é€Ÿåº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ä¸€ä¸ªæå¤§æ”¹è¿›ï¼Œç±»ä¼¼PHPæœ¬åœ°FPCã€‚</p>
<p>å†æ¬¡ä»¥Magentoä¸ºä¾‹ï¼ŒMagentoæä¾›ä¸€ä¸ªæ’ä»¶æ¥ä½¿ç”¨Redisä½œä¸ºå…¨é¡µç¼“å­˜åç«¯ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯¹WordPressçš„ç”¨æˆ·æ¥è¯´ï¼ŒPantheonæœ‰ä¸€ä¸ªéå¸¸å¥½çš„æ’ä»¶ wp-redisï¼Œè¿™ä¸ªæ’ä»¶èƒ½å¸®åŠ©ä½ ä»¥æœ€å¿«é€Ÿåº¦åŠ è½½ä½ æ›¾æµè§ˆè¿‡çš„é¡µé¢ã€‚</p>
<h4 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a><strong>é˜Ÿåˆ—</strong></h4><p>Reidsåœ¨å†…å­˜å­˜å‚¨å¼•æ“é¢†åŸŸçš„ä¸€å¤§ä¼˜ç‚¹æ˜¯æä¾› list å’Œ set æ“ä½œï¼Œè¿™ä½¿å¾—Redisèƒ½ä½œä¸ºä¸€ä¸ªå¾ˆå¥½çš„æ¶ˆæ¯é˜Ÿåˆ—å¹³å°æ¥ä½¿ç”¨ã€‚Redisä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨çš„æ“ä½œï¼Œå°±ç±»ä¼¼äºæœ¬åœ°ç¨‹åºè¯­è¨€ï¼ˆå¦‚Pythonï¼‰å¯¹ list çš„ push/pop æ“ä½œã€‚</p>
<p>å¦‚æœä½ å¿«é€Ÿçš„åœ¨Googleä¸­æœç´¢â€œRedis queuesâ€ï¼Œä½ é©¬ä¸Šå°±èƒ½æ‰¾åˆ°å¤§é‡çš„å¼€æºé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®çš„ç›®çš„å°±æ˜¯åˆ©ç”¨Redisåˆ›å»ºéå¸¸å¥½çš„åç«¯å·¥å…·ï¼Œä»¥æ»¡è¶³å„ç§é˜Ÿåˆ—éœ€æ±‚ã€‚ä¾‹å¦‚ï¼ŒCeleryæœ‰ä¸€ä¸ªåå°å°±æ˜¯ä½¿ç”¨Redisä½œä¸ºbrokerï¼Œä½ å¯ä»¥ä»è¿™é‡Œå»æŸ¥çœ‹ã€‚</p>
<h4 id="æ’è¡Œæ¦œ-è®¡æ•°å™¨"><a href="#æ’è¡Œæ¦œ-è®¡æ•°å™¨" class="headerlink" title="æ’è¡Œæ¦œ/è®¡æ•°å™¨"></a><strong>æ’è¡Œæ¦œ/è®¡æ•°å™¨</strong></h4><p>Redisåœ¨å†…å­˜ä¸­å¯¹æ•°å­—è¿›è¡Œé€’å¢æˆ–é€’å‡çš„æ“ä½œå®ç°çš„éå¸¸å¥½ã€‚é›†åˆï¼ˆSetï¼‰å’Œæœ‰åºé›†åˆï¼ˆSorted Setï¼‰ä¹Ÿä½¿å¾—æˆ‘ä»¬åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å˜çš„éå¸¸ç®€å•ï¼ŒRedisåªæ˜¯æ­£å¥½æä¾›äº†è¿™ä¸¤ç§æ•°æ®ç»“æ„ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä»æ’åºé›†åˆä¸­è·å–åˆ°æ’åæœ€é å‰çš„10ä¸ªç”¨æˆ·â€“æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œuser_scoresâ€ï¼Œæˆ‘ä»¬åªéœ€è¦åƒä¸‹é¢ä¸€æ ·æ‰§è¡Œå³å¯ï¼š</p>
<p>å½“ç„¶ï¼Œè¿™æ˜¯å‡å®šä½ æ˜¯æ ¹æ®ä½ ç”¨æˆ·çš„åˆ†æ•°åšé€’å¢çš„æ’åºã€‚å¦‚æœä½ æƒ³è¿”å›ç”¨æˆ·åŠç”¨æˆ·çš„åˆ†æ•°ï¼Œä½ éœ€è¦è¿™æ ·æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGE user_scores 0 10 WITHSCORES</span><br></pre></td></tr></table></figure>
<p>Agora Gameså°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨Rubyå®ç°çš„ï¼Œå®ƒçš„æ’è¡Œæ¦œå°±æ˜¯ä½¿ç”¨Redisæ¥å­˜å‚¨æ•°æ®çš„ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚</p>
<h4 id="å‘å¸ƒ-è®¢é˜…"><a href="#å‘å¸ƒ-è®¢é˜…" class="headerlink" title="å‘å¸ƒ/è®¢é˜…"></a><strong>å‘å¸ƒ/è®¢é˜…</strong></h4><p>æœ€åï¼ˆä½†è‚¯å®šä¸æ˜¯æœ€ä¸é‡è¦çš„ï¼‰æ˜¯Redisçš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½ã€‚å‘å¸ƒ/è®¢é˜…çš„ä½¿ç”¨åœºæ™¯ç¡®å®éå¸¸å¤šã€‚æˆ‘å·²çœ‹è§äººä»¬åœ¨ç¤¾äº¤ç½‘ç»œè¿æ¥ä¸­ä½¿ç”¨ï¼Œè¿˜å¯ä½œä¸ºåŸºäºå‘å¸ƒ/è®¢é˜…çš„è„šæœ¬è§¦å‘å™¨ï¼Œç”šè‡³ç”¨Redisçš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½æ¥å»ºç«‹èŠå¤©ç³»ç»Ÿï¼</p>
<p>Redisæä¾›çš„æ‰€æœ‰ç‰¹æ€§ä¸­ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªæ˜¯å–œæ¬¢çš„äººæœ€å°‘çš„ä¸€ä¸ªï¼Œè™½ç„¶å®ƒä¸ºç”¨æˆ·æä¾›å¦‚æœæ­¤å¤šåŠŸèƒ½ã€‚</p>
<h3 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h3><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/entry/5b7cfe976fb9a01a13366d95?utm_source=gold_browser_extension">https://juejin.im/entry/5b7cfe976fb9a01a13366d95?utm_source=gold_browser_extension</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://mp.weixin.qq.com/s?__biz=MzI4Njc5NjM1NQ==&mid=2247486252&idx=1&sn=d72ee144765b3b16964dc4ce0f54ccd7&chksm=ebd63400dca1bd16fada25e175c052fc7528f85750d2e0c4bfd9bd561c8aa49fe019f32c21ae&mpshare=1&scene=24&srcid=09020vky9fT4UYZG8JpeePdz#rd">Redisçš„é‚£äº›æœ€å¸¸è§é¢è¯•é—®é¢˜</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.cnblogs.com/whcwkw1314/p/8922031.html">javaä¸­Redis5å¤§åŸºæœ¬ç±»å‹çš„ç”¨æ³•</a></li>
</ul>

  </div>

  
    <div style="text-align:center;width:100%">
      <img src="https://cdn.jsdelivr.net/gh/cayzlh/git-img-repository@master/uPic/640-2.gif">
    </div>
  

  
    <div>
      <h4>ç‰ˆæƒå£°æ˜</h4>
      <pre>
        
        <strong>æœ¬æ–‡æ¥æºï¼š </strong><a href="https://www.cayzlh.com/blog" title="ğŸ³Antä¸¶" rel="noopener external nofollow noreferrer" target="_blank">https://www.cayzlh.com/blog</a>

        <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://www.cayzlh.com/2018/09/04/cd7b78e0.html" title="/blog/Redis%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93">https://www.cayzlh.com/2018/09/04/cd7b78e0.html</a>

        <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
        
          æ–‡ç« å†…å®¹ä»…ç”¨ä½œå­¦ä¹ å’Œåˆ†äº«ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„
        
      </pre>
    </div>
  

</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/blog/">Home</a></li>
        
          <li><a href="/blog/archives/">Articles</a></li>
        
          <li><a href="/blog/about/">About</a></li>
        
          <li><a href="/blog/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFredis"><span class="toc-number">1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯redis?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reids%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">Reidsçš„ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8redis%E6%9C%89%E5%93%AA%E4%BA%9B%E5%A5%BD%E5%A4%84"><span class="toc-number">3.</span> <span class="toc-text">ä½¿ç”¨redisæœ‰å“ªäº›å¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Java%E4%B8%AD%E5%AF%B9Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.</span> <span class="toc-text">Javaä¸­å¯¹Redisæ•°æ®ç±»å‹çš„æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#String"><span class="toc-number">4.1.1.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Hash"><span class="toc-number">4.1.2.</span> <span class="toc-text">Hash</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#List%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.3.</span> <span class="toc-text">Listæ“ä½œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Set%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.4.</span> <span class="toc-text">Setæ“ä½œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SortedSet-%E6%93%8D%E4%BD%9C"><span class="toc-number">4.1.5.</span> <span class="toc-text">SortedSet æ“ä½œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9B%B8%E6%AF%94memcached%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8A%BF"><span class="toc-number">5.</span> <span class="toc-text">redisç›¸æ¯”memcachedæœ‰å“ªäº›ä¼˜åŠ¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memcache%E4%B8%8ERedis%E7%9A%84%E5%8C%BA%E5%88%AB%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">6.</span> <span class="toc-text">Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E5%B8%B8%E8%A7%81%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.</span> <span class="toc-text">rediså¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mySQL%E9%87%8C%E6%9C%892000w%E6%95%B0%E6%8D%AE%EF%BC%8Credis%E4%B8%AD%E5%8F%AA%E5%AD%9820w%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81redis%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%83%BD%E6%98%AF%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">8.</span> <span class="toc-text">mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88redis%E9%9C%80%E8%A6%81%E6%8A%8A%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E6%94%BE%E5%88%B0%E5%86%85%E5%AD%98%E4%B8%AD"><span class="toc-number">9.</span> <span class="toc-text">ä¸ºä»€ä¹ˆrediséœ€è¦æŠŠæ‰€æœ‰æ•°æ®æ”¾åˆ°å†…å­˜ä¸­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E6%98%AF%E5%8D%95%E8%BF%9B%E7%A8%8B%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-number">10.</span> <span class="toc-text">Redisæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9A%84%E5%B9%B6%E5%8F%91%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">11.</span> <span class="toc-text">redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">12.</span> <span class="toc-text">redisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E7%85%A7%EF%BC%88snapshots%EF%BC%89"><span class="toc-number">12.1.</span> <span class="toc-text">å¿«ç…§ï¼ˆsnapshotsï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOF"><span class="toc-number">12.2.</span> <span class="toc-text">AOF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E6%96%B9%E5%BC%8F"><span class="toc-number">12.3.</span> <span class="toc-text">è™šæ‹Ÿå†…å­˜æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E7%9A%84%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88%E7%AD%96%E7%95%A5%E5%92%8C%E4%B8%BB%E9%94%AE%E5%A4%B1%E6%95%88%E6%9C%BA%E5%88%B6"><span class="toc-number">13.</span> <span class="toc-text">redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%BD%B1%E5%93%8D%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="toc-number">13.1.</span> <span class="toc-text">1ã€å½±å“ç”Ÿå­˜æ—¶é—´çš„ä¸€äº›æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">13.2.</span> <span class="toc-text">å¦‚ä½•æ›´æ–°ç”Ÿå­˜æ—¶é—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">13.3.</span> <span class="toc-text">æœ€å¤§ç¼“å­˜é…ç½®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">13.4.</span> <span class="toc-text">ä¸‰ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis-%E9%80%82%E5%90%88%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-number">14.</span> <span class="toc-text">redis é€‚åˆçš„åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E7%BC%93%E5%AD%98%EF%BC%88Session-Cache%EF%BC%89"><span class="toc-number">14.1.</span> <span class="toc-text">ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%A1%B5%E7%BC%93%E5%AD%98%EF%BC%88FPC%EF%BC%89"><span class="toc-number">14.2.</span> <span class="toc-text">å…¨é¡µç¼“å­˜ï¼ˆFPCï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%9F%E5%88%97"><span class="toc-number">14.3.</span> <span class="toc-text">é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E8%A1%8C%E6%A6%9C-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">14.4.</span> <span class="toc-text">æ’è¡Œæ¦œ&#x2F;è®¡æ•°å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85"><span class="toc-number">14.5.</span> <span class="toc-text">å‘å¸ƒ&#x2F;è®¢é˜…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">15.</span> <span class="toc-text">å‚è€ƒæ–‡çŒ®</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.facebook.com/sharer.php?u=https://www.cayzlh.com/2018/09/04/cd7b78e0.html"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://twitter.com/share?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&text=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.linkedin.com/shareArticle?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&is_video=false&description=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“&body=Check out this article: https://www.cayzlh.com/2018/09/04/cd7b78e0.html"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://getpocket.com/save?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://reddit.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.stumbleupon.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://digg.com/submit?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&title=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="http://www.tumblr.com/share/link?url=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&name=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="external nofollow noopener noreferrer" href="https://news.ycombinator.com/submitlink?u=https://www.cayzlh.com/2018/09/04/cd7b78e0.html&t=RedisåŸºç¡€çŸ¥è¯†æ€»ç»“"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
<!--        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>-->
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    CAYZLH &copy;
    
    
    2019-2021
    ç²¤ICPå¤‡20058712å·-1
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
          <li><a href="/blog/tools/">tools</a></li>
        
          <li><a href="/blog/links/">links</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/blog/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/blog/lib/jquery/jquery.min.js"></script>


<script src="/blog/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/blog/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/blog/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129095667-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-129095667-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
