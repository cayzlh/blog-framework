<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>synchronized - BLOG | CAYZLH</title>

  
    <meta name="description" content="synchronizedçš„ä½¿ç”¨åŠåŸç†">
<meta property="og:type" content="article">
<meta property="og:title" content="synchronized">
<meta property="og:url" content="https://www.cayzlh.com/2018/08/28/edea11bc.html">
<meta property="og:site_name" content="BLOG | CAYZLH">
<meta property="og:description" content="synchronizedçš„ä½¿ç”¨åŠåŸç†">
<meta property="og:locale">
<meta property="article:published_time" content="2018-08-28T14:28:56.000Z">
<meta property="article:modified_time" content="2021-02-20T15:30:20.501Z">
<meta property="article:author" content="ğŸ³Antä¸¶">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JVM">
<meta name="twitter:card" content="summary">
  
  

  <!-- feed -->
  
    <link rel="alternate" href="/blog/atom.xml" title="BLOG | CAYZLH" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/blog/css/main.css">

  

  
</head>

<body>
  


  <div class="l_body" id="start">
    <aside class="l_left">
    

<header class="header">
  <div class="logo-wrap">
  
  
    <a class="title" href="/blog/">
      BLOG | CAYZLH
    </a>
  
</div>

  <nav class="menu dis-select"><a class="nav-item active" href="/blog/">Blog</a></nav>
</header>

<div class="widgets">
  
    
      
      
<div class="widget-wrap" id="toc"><div class="widget-header h4 dis-select"><span class="name">TOC</span></div><div class="widget-body fs14 post"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#synchronized%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-text">synchronizedçš„ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#synchronized%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">synchronizedçš„å®ç°åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#synchronized%E4%B8%8E%E6%9C%89%E5%BA%8F%E6%80%A7"><span class="toc-text">synchronizedä¸æœ‰åºæ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#synchronized%E4%B8%8E%E9%94%81%E4%BC%98%E5%8C%96"><span class="toc-text">synchronizedä¸é”ä¼˜åŒ–</span></a></li></ol></div></div></div>

    
  
</div>


    </aside>
    <div class="l_main">
      

      


  <div class="bread-nav fs12">
  
    
    <div id="breadcrumb">
      <a class="cap breadcrumb" href="/">Home</a>
      <span class="sep"></span>
      <a class="cap breadcrumb" href="/">Blog</a>
      
        <span class="sep"></span>
        <a class="cap breadcrumb-link" href="/blog/categories/Java/">Java</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/blog/categories/Java/JVM/">JVM</a>
      
    </div>
    <div id="post-meta">
      Posted on&nbsp;<time datetime="2018-08-28T14:28:56.000Z">2018-08-28</time>
    </div>
  
  </div>


<article class="content md post">
<h1 class="article-title"><span>synchronized</span></h1>
<blockquote>
<p>Javaè¯­è¨€ä¸ºäº†è§£å†³å¹¶å‘ç¼–ç¨‹ä¸­å­˜åœ¨çš„åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼Œæä¾›äº†ä¸€ç³»åˆ—å’Œå¹¶å‘å¤„ç†ç›¸å…³çš„å…³é”®å­—ï¼Œæ¯”å¦‚synchronizedã€volatileã€finalã€concurrenåŒ…ç­‰ã€‚</p>
</blockquote>
<p>åœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­ï¼Œæœ‰è¿™æ ·ä¸€æ®µè¯ï¼š</p>
<blockquote>
<p><code>synchronized</code>å…³é”®å­—åœ¨éœ€è¦åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§è¿™ä¸‰ç§ç‰¹æ€§çš„æ—¶å€™éƒ½å¯ä»¥ä½œä¸ºå…¶ä¸­ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œçœ‹èµ·æ¥æ˜¯â€œä¸‡èƒ½â€çš„ã€‚çš„ç¡®ï¼Œå¤§éƒ¨åˆ†å¹¶å‘æ§åˆ¶æ“ä½œéƒ½èƒ½ä½¿ç”¨synchronizedæ¥å®Œæˆã€‚</p>
</blockquote>
<p><code>synchronized</code>åªæ˜¯ä¸ªå…³é”®å­—è€Œå·²ï¼Œç”¨èµ·æ¥å¾ˆç®€å•ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å¤„ç†å¤šçº¿ç¨‹é—®é¢˜æ—¶å¯ä»¥ä¸ç”¨è€ƒè™‘å¤ªå¤šï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ªå…³é”®å­—å¸®æˆ‘ä»¬å±è”½äº†å¾ˆå¤šç»†èŠ‚ã€‚</p>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<code>synchronized</code>çš„ç”¨æ³•ã€åŸç†ï¼Œä»¥åŠå¦‚ä½•æä¾›åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ä¿éšœçš„ç­‰ã€‚</p>
<h3 id="synchronizedçš„ç”¨æ³•"><a href="#synchronizedçš„ç”¨æ³•" class="headerlink" title="synchronizedçš„ç”¨æ³•"></a>synchronizedçš„ç”¨æ³•</h3><p><code>synchronized</code>æ˜¯Javaæä¾›çš„ä¸€ä¸ªå¹¶å‘æ§åˆ¶çš„å…³é”®å­—ã€‚ä¸»è¦æœ‰ä¸¤ç§ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>synchronized</code>æ—¢å¯ä»¥ä¿®é¥°æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®é¥°ä»£ç å—ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedDemo</span> </span>&#123;</span><br><span class="line">     <span class="comment">//åŒæ­¥æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">doSomeThing</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒæ­¥ä»£ç å—</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doOtherThing</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (SynchronizedDemo.class)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¢«<code>synchronized</code>ä¿®é¥°çš„ä»£ç å—åŠæ–¹æ³•ï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œåªèƒ½è¢«å•ä¸ªçº¿ç¨‹è®¿é—®ã€‚ </p>
<h3 id="synchronizedçš„å®ç°åŸç†"><a href="#synchronizedçš„å®ç°åŸç†" class="headerlink" title="synchronizedçš„å®ç°åŸç†"></a>synchronizedçš„å®ç°åŸç†</h3><blockquote>
<p><code>synchronized</code>ï¼Œæ˜¯Javaä¸­ç”¨äºè§£å†³å¹¶å‘æƒ…å†µä¸‹æ•°æ®åŒæ­¥è®¿é—®çš„ä¸€ä¸ªå¾ˆé‡è¦çš„å…³é”®å­—ã€‚å½“æˆ‘ä»¬æƒ³è¦ä¿è¯ä¸€ä¸ªå…±äº«èµ„æºåœ¨åŒä¸€æ—¶é—´åªä¼šè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®åˆ°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨<code>synchronized</code>å…³é”®å­—å¯¹ç±»æˆ–è€…å¯¹è±¡åŠ é”ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œåç¼–è¯‘ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">cayzlh</span>.<span class="title">SynchronizedDemo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> com.cayzlh.SynchronizedDemo();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">doSomeThing</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">       3: ldc           #3                  // String Hello World</span><br><span class="line">       5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">       <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doOtherThing</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       0: ldc           #5                  // class com/cayzlh/SynchronizedDemo</span><br><span class="line">       <span class="number">2</span>: dup</span><br><span class="line">       <span class="number">3</span>: astore_1</span><br><span class="line">       <span class="number">4</span>: monitorenter</span><br><span class="line">       5: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">       8: ldc           #3                  // String Hello World</span><br><span class="line">      10: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">      <span class="number">13</span>: aload_1</span><br><span class="line">      <span class="number">14</span>: monitorexit</span><br><span class="line">      <span class="number">15</span>: goto          <span class="number">23</span></span><br><span class="line">      <span class="number">18</span>: astore_2</span><br><span class="line">      <span class="number">19</span>: aload_1</span><br><span class="line">      <span class="number">20</span>: monitorexit</span><br><span class="line">      <span class="number">21</span>: aload_2</span><br><span class="line">      <span class="number">22</span>: athrow</span><br><span class="line">      <span class="number">23</span>: <span class="keyword">return</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">           <span class="number">5</span>    <span class="number">15</span>    <span class="number">18</span>   any</span><br><span class="line">          <span class="number">18</span>    <span class="number">21</span>    <span class="number">18</span>   any</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼š</p>
<p>å¯¹äºåŒæ­¥æ–¹æ³•ï¼ŒJVMé‡‡ç”¨<code>ACC_SYNCHRONIZED</code>æ ‡è®°ç¬¦æ¥å®ç°åŒæ­¥ã€‚ </p>
<p>å¯¹äºåŒæ­¥ä»£ç å—ã€‚JVMé‡‡ç”¨<code>monitorenter</code>ã€<code>monitorexit</code>ä¸¤ä¸ªæŒ‡ä»¤æ¥å®ç°åŒæ­¥ã€‚</p>
<p>åœ¨The JavaÂ® Virtual Machine Specificationä¸­æœ‰å…³äºåŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—çš„å®ç°åŸç†çš„ä»‹ç»:</p>
<blockquote>
<p>Method-level synchronization is performed implicitly, as part of method invocation and return. A synchronized method is distinguished in the run-time constant poolâ€™s method<em>info structure by the ACC</em>SYNCHRONIZED flag, which is checked by the method invocation instructions. When invoking a method for which ACC_SYNCHRONIZED is set, the executing thread enters a monitor, invokes the method itself, and exits the monitor whether the method invocation completes normally or abruptly. During the time the executing thread owns the monitor, no other thread may enter it. If an exception is thrown during invocation of the synchronized method and the synchronized method does not handle the exception, the monitor for the method is automatically exited before the exception is rethrown out of the synchronized method.</p>
<p>æ–¹æ³•çº§çš„åŒæ­¥æ˜¯éšå¼çš„ã€‚åŒæ­¥æ–¹æ³•çš„å¸¸é‡æ± ä¸­ä¼šæœ‰ä¸€ä¸ª<code>ACC_SYNCHRONIZED</code>æ ‡å¿—ã€‚å½“æŸä¸ªçº¿ç¨‹è¦è®¿é—®æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰<code>ACC_SYNCHRONIZED</code>ï¼Œå¦‚æœæœ‰è®¾ç½®ï¼Œåˆ™éœ€è¦å…ˆè·å¾—ç›‘è§†å™¨é”ï¼Œç„¶åå¼€å§‹æ‰§è¡Œæ–¹æ³•ï¼Œæ–¹æ³•æ‰§è¡Œä¹‹åå†é‡Šæ”¾ç›‘è§†å™¨é”ã€‚è¿™æ—¶å¦‚æœå…¶ä»–çº¿ç¨‹æ¥è¯·æ±‚æ‰§è¡Œæ–¹æ³•ï¼Œä¼šå› ä¸ºæ— æ³•è·å¾—ç›‘è§†å™¨é”è€Œè¢«é˜»æ–­ä½ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¦‚æœåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå¹¶ä¸”æ–¹æ³•å†…éƒ¨å¹¶æ²¡æœ‰å¤„ç†è¯¥å¼‚å¸¸ï¼Œé‚£ä¹ˆåœ¨å¼‚å¸¸è¢«æŠ›åˆ°æ–¹æ³•å¤–é¢ä¹‹å‰ç›‘è§†å™¨é”ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</strong></p>
<p>åŒæ­¥ä»£ç å—ä½¿ç”¨<code>monitorenter</code>å’Œ<code>monitorexit</code>ä¸¤ä¸ªæŒ‡ä»¤å®ç°ã€‚å¯ä»¥æŠŠæ‰§è¡Œ<code>monitorenter</code>æŒ‡ä»¤ç†è§£ä¸ºåŠ é”ï¼Œæ‰§è¡Œ<code>monitorexit</code>ç†è§£ä¸ºé‡Šæ”¾é”ã€‚ æ¯ä¸ªå¯¹è±¡ç»´æŠ¤ç€ä¸€ä¸ªè®°å½•ç€è¢«é”æ¬¡æ•°çš„è®¡æ•°å™¨ã€‚æœªè¢«é”å®šçš„å¯¹è±¡çš„è¯¥è®¡æ•°å™¨ä¸º0ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ï¼ˆæ‰§è¡Œ<code>monitorenter</code>ï¼‰åï¼Œè¯¥è®¡æ•°å™¨è‡ªå¢å˜ä¸º 1 ï¼Œå½“åŒä¸€ä¸ªçº¿ç¨‹å†æ¬¡è·å¾—è¯¥å¯¹è±¡çš„é”çš„æ—¶å€™ï¼Œè®¡æ•°å™¨å†æ¬¡è‡ªå¢ã€‚å½“åŒä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ï¼ˆæ‰§è¡Œ<code>monitorexit</code>æŒ‡ä»¤ï¼‰çš„æ—¶å€™ï¼Œè®¡æ•°å™¨å†è‡ªå‡ã€‚å½“è®¡æ•°å™¨ä¸º0çš„æ—¶å€™ã€‚é”å°†è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹ä¾¿å¯ä»¥è·å¾—é”ã€‚</p>
</blockquote>
<p>æ— è®ºæ˜¯<code>ACC_SYNCHRONIZED</code>è¿˜æ˜¯<code>monitorenter</code>ã€<code>monitorexit</code>éƒ½æ˜¯åŸºäºMonitorå®ç°çš„ï¼Œåœ¨Javaè™šæ‹Ÿæœº(HotSpot)ä¸­ï¼ŒMonitoræ˜¯åŸºäºC++å®ç°çš„ï¼Œç”±ObjectMonitorå®ç°ã€‚</p>
<p><code>ObjectMonitor</code>ç±»ä¸­æä¾›äº†å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚<code>enter</code>ã€<code>exit</code>ã€<code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code>ç­‰ã€‚<code>sychronized</code>åŠ é”çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨<code>objectMonitor</code>çš„<code>enter</code>æ–¹æ³•ï¼Œè§£é”çš„æ—¶å€™ä¼šè°ƒç”¨<code>exit</code>æ–¹æ³•ã€‚</p>
<h3 id="synchronizedä¸æœ‰åºæ€§"><a href="#synchronizedä¸æœ‰åºæ€§" class="headerlink" title="synchronizedä¸æœ‰åºæ€§"></a>synchronizedä¸æœ‰åºæ€§</h3><p>æœ‰åºæ€§å³ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
<blockquote>
<p>ç”±äºå¤„ç†å™¨ä¼˜åŒ–å’ŒæŒ‡ä»¤é‡æ’ç­‰ï¼ŒCPUè¿˜å¯èƒ½å¯¹è¾“å…¥ä»£ç è¿›è¡Œä¹±åºæ‰§è¡Œï¼Œæ¯”å¦‚load-&gt;add-&gt;save æœ‰å¯èƒ½è¢«ä¼˜åŒ–æˆload-&gt;save-&gt;add ã€‚è¿™å°±æ˜¯å¯èƒ½å­˜åœ¨æœ‰åºæ€§é—®é¢˜ã€‚</p>
</blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>synchronized</code>æ˜¯æ— æ³•ç¦æ­¢æŒ‡ä»¤é‡æ’å’Œå¤„ç†å™¨ä¼˜åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>synchronized</code>æ— æ³•é¿å…ä¸Šè¿°æåˆ°çš„é—®é¢˜ã€‚</p>
<p><em>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜è¯´<code>synchronized</code>ä¹Ÿæä¾›äº†æœ‰åºæ€§ä¿è¯å‘¢ï¼Ÿ</em></p>
<p><strong>Javaç¨‹åºä¸­å¤©ç„¶çš„æœ‰åºæ€§å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯å¤©ç„¶æœ‰åºçš„ã€‚å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚</strong></p>
<p>ä»¥ä¸Šè¿™å¥è¯ä¹Ÿæ˜¯ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­çš„åŸå¥ï¼Œè¿™å’Œ<code>as-if-serialè¯­ä¹‰</code>æœ‰å…³ã€‚</p>
<p><code>as-if-serial</code>è¯­ä¹‰çš„æ„æ€æŒ‡ï¼šä¸ç®¡æ€ä¹ˆé‡æ’åºï¼ˆç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†æé«˜å¹¶è¡Œåº¦ï¼‰ï¼Œå•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœéƒ½ä¸èƒ½è¢«æ”¹å˜ã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨æ— è®ºå¦‚ä½•ä¼˜åŒ–ï¼Œéƒ½å¿…é¡»éµå®ˆ<code>as-if-serial</code>è¯­ä¹‰ã€‚</p>
<p>ç®€å•è¯´å°±æ˜¯ï¼Œ<code>as-if-serialè¯­ä¹‰</code>ä¿è¯äº†å•çº¿ç¨‹ä¸­ï¼ŒæŒ‡ä»¤é‡æ’æ˜¯æœ‰ä¸€å®šçš„é™åˆ¶çš„ï¼Œè€Œåªè¦ç¼–è¯‘å™¨å’Œå¤„ç†å™¨éƒ½éµå®ˆäº†è¿™ä¸ªè¯­ä¹‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºå•çº¿ç¨‹ç¨‹åºæ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„ã€‚å½“ç„¶ï¼Œå®é™…ä¸Šè¿˜æ˜¯æœ‰é‡æ’çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬æ— é¡»å…³å¿ƒè¿™ç§é‡æ’çš„å¹²æ‰°ã€‚</p>
<p><strong>æ‰€ä»¥å‘¢ï¼Œç”±äºsynchronizedä¿®é¥°çš„ä»£ç ï¼ŒåŒä¸€æ—¶é—´åªèƒ½è¢«åŒä¸€çº¿ç¨‹è®¿é—®ã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ã€‚æ‰€ä»¥ï¼Œå¯ä»¥ä¿è¯å…¶æœ‰åºæ€§ã€‚</strong></p>
<h3 id="synchronizedä¸é”ä¼˜åŒ–"><a href="#synchronizedä¸é”ä¼˜åŒ–" class="headerlink" title="synchronizedä¸é”ä¼˜åŒ–"></a><strong>synchronizedä¸é”ä¼˜åŒ–</strong></h3><p><code>synchronized</code>å…¶å®æ˜¯å€ŸåŠ©Monitorå®ç°çš„ï¼Œåœ¨åŠ é”æ—¶ä¼šè°ƒç”¨objectMonitorçš„<code>enter</code>æ–¹æ³•ï¼Œè§£é”çš„æ—¶å€™ä¼šè°ƒç”¨<code>exit</code>æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œåªæœ‰åœ¨JDK1.6ä¹‹å‰ï¼Œsynchronizedçš„å®ç°æ‰ä¼šç›´æ¥è°ƒç”¨ObjectMonitorçš„<code>enter</code>å’Œ<code>exit</code>ï¼Œè¿™ç§é”è¢«ç§°ä¹‹ä¸ºé‡é‡çº§é”ã€‚</p>
<p>æ‰€ä»¥ï¼Œåœ¨JDK1.6ä¸­å‡ºç°å¯¹é”è¿›è¡Œäº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œè¿›è€Œå‡ºç°è½»é‡çº§é”ï¼Œåå‘é”ï¼Œé”æ¶ˆé™¤ï¼Œé€‚åº”æ€§è‡ªæ—‹é”ï¼Œé”ç²—åŒ–(è‡ªæ—‹é”åœ¨1.4å°±æœ‰ï¼Œåªä¸è¿‡é»˜è®¤çš„æ˜¯å…³é—­çš„ï¼Œjdk1.6æ˜¯é»˜è®¤å¼€å¯çš„)ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ä¸ºäº†åœ¨çº¿ç¨‹ä¹‹é—´æ›´é«˜æ•ˆçš„å…±äº«æ•°æ® ï¼Œè§£å†³ç«äº‰é—®é¢˜ã€‚</p>


<div class="article-footer fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>æœ¬æ–‡é‡‡ç”¨ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div></section></div>

</article>

<div class="related-wrap" id="read-next"><section class="header cap theme"><span>READ NEXT</span></section><section class="body"><div class="post-title h2"><a href="/blog/2018/08/28/2e82a2db.html">Javaå†…å­˜æ¨¡å‹çš„å®ç°</a></div><div class="post-title fs14"><a href="/blog/2018/08/30/fe4c9cb6.html">or prev: volatile</a></div></section></div>


<div class="related-wrap" id="related-posts">
    <section class="header">
      <div class="title cap theme">Related Posts</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/blog/2018/09/21/7876bd5d.html" title="çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gitee.com/cayzlh/img-repo/raw/master/2020/04/19/l0vR4U.png"></div><span class="title">çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</span><span class="excerpt">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬13ç« å†…å®¹å°ç»“ï¼Œçº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</span></a><a class="item" href="/blog/2018/09/18/badf9669.html" title="Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gitee.com/cayzlh/img-repo/raw/master/2020/04/19/WEKuAO.png"></div><span class="title">Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</span><span class="excerpt">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬12ç« å†…å®¹å°ç»“ï¼ŒJavaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</span></a><a class="item" href="/blog/2018/09/16/4cd43d51.html" title="è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gitee.com/cayzlh/img-repo/raw/master/2020/04/19/EZRTAh.png"></div><span class="title">è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“</span><span class="excerpt">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬8ç« å†…å®¹å°ç»“ï¼Œè™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“</span></a><a class="item" href="/blog/2018/09/14/cdffca23.html" title="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gitee.com/cayzlh/img-repo/raw/master/2020/04/19/kYqehE.png"></div><span class="title">è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</span><span class="excerpt">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬7ç« å†…å®¹å°ç»“ï¼Œè™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</span></a><a class="item" href="/blog/2018/08/30/fe4c9cb6.html" title="volatile"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://github.com/cayzlh/git-img-repository/raw/master/blog/2018083001/1.png"></div><span class="title">volatile</span><span class="excerpt">volatileå­¦ä¹ æ€»ç»“ï¼Œç”¨æ³•åŠåŸç†</span></a></div></section></div>





      
<footer class="page-footer fs12"><hr><div><p>All articles in this blog are licensed under <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</p>
<p>This site was deployed by <a href="https://www.cayzlh.com/blog/">@ğŸ³Antä¸¶</a> using <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.1.0">Stellar</a>.</p>
</div></footer>

      <div class="float-panel mobile-only" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" viewbox="0 0 1228 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2849"><path d="M0 0m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2850"/><path d="M0 389.560798m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2851"/><path d="M0 779.121596m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.390199l-973.901995 0q-97.390199 0-97.390199-97.390199l0 0q0-97.390199 97.390199-97.390199Z" p-id="2852"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script')
      script.src = src
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.1.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/blog/js/plugins/sites.js',
    friendsjs: '/blog/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper/swiper-bundle.min.css","js":"https://unpkg.com/swiper/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
</script>

<!-- required -->

  
<script src="/blog/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
