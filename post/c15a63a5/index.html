<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Dockerfileä½¿ç”¨ä»‹ç» - CAYZLH</title>

  
  <meta name="description" content="ä½¿ç”¨ Dockerfile å®šä¹‰é•œåƒï¼Œä¾èµ–é•œåƒæ¥è¿è¡Œå®¹å™¨ï¼Œå› æ­¤ Dockerfile æ˜¯é•œåƒå’Œå®¹å™¨çš„å…³é”®ï¼ŒDockerfile å¯ä»¥éå¸¸å®¹æ˜“çš„å®šä¹‰é•œåƒå†…å®¹ï¼ŒåŒæ—¶åœ¨æˆ‘ä»¬åæœŸçš„å¾®æœåŠ¡å®è·µä¸­ï¼ŒDockerfile ä¹Ÿæ˜¯é‡ç‚¹å…³æ³¨çš„å†…å®¹">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="CAYZLH" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    
      <meta name="msapplication-TileColor" content="#2d89ef">
    
      <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
    
      <meta name="theme-color" content="#ffffff">
    
      <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/cayzlh/psychic-potato@master/logo/favicon.ico">
    
      <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/cayzlh/psychic-potato@master/logo/favicon-192x192.png" sizes="192x192">
    
      <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/cayzlh/psychic-potato@master/logo/apple-touch-icon.png">
    
  
</head>

<body>
  


  <div class="l_body" id="start">
    <aside class="l_left">
    

<header class="header">
  <div class="logo-wrap">
  
    <a class="avatar" href="/">
      
        <img no-lazy class="bg" src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp" onerror="javascript:this.classList.add('error');this.src='https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';">
      
      <img no-lazy class="avatar" src="https://cdn.jsdelivr.net/gh/cayzlh/psychic-potato@master/image/IMG_4207.JPG" onerror="javascript:this.classList.add('error');this.src='https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';">
    </a>
  
  
    <a class="title" href="/">
      CAYZLH
    </a>
  
</div>

  <nav class="menu dis-select"><a class="nav-item active" href="/">æ–‡ç« </a><a class="nav-item" href="/wiki/">æ–‡æ¡£</a><a class="nav-item" href="/talking/">åŠ¨æ€</a><a class="nav-item" href="/about/">æ›´å¤š</a></nav>
</header>

<div class="widgets">
  
    
      
      
<div class="widget-wrap" id="toc"><div class="widget-header h4 dis-select"><span class="name">æœ¬æ–‡ç›®å½•</span></div><div class="widget-body fs14 post"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dockerfile-%E6%A6%82%E5%BF%B5"><span class="toc-text">Dockerfile æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dockerfile-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-text">Dockerfile æ–‡ä»¶æ ¼å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">æ„å»ºé•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE"><span class="toc-text">é•œåƒæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98"><span class="toc-text">ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BB%E6%89%BE%E7%BC%93%E5%AD%98%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-text">å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">ç®€å•ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AE%B9%E5%99%A8%E5%86%85%E5%AE%B9"><span class="toc-text">ä¿®æ”¹å®¹å™¨å†…å®¹</span></a></li></ol></div></div></div>

    
  
</div>
<footer class="footer"><div class="social-wrap dis-select"><a class="social" href="https://github.com/cayzlh" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/social/08a41b181ce68.svg"></a><a class="social" href="/about/#comments" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/social/942ebbf1a4b91.svg"></a></div></footer>

    </aside>
    <div class="l_main">
      

      


  <div class="bread-nav fs12">
  
    
    <div id="breadcrumb">
      <a class="cap breadcrumb" href="/">ä¸»é¡µ</a>
      <span class="sep"></span>
      <a class="cap breadcrumb" href="/">æ–‡ç« </a>
      
        <span class="sep"></span>
        <a class="cap breadcrumb-link" href="/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/">ç¬”è®°æœ¬</a>
      
    </div>
    <div id="post-meta">
      å‘å¸ƒäº&nbsp;<time datetime="2019-01-30T00:23:30.000Z">2019-01-30</time>
    </div>
  
  </div>


<article class="content md post">
<h1 class="article-title"><span>Dockerfileä½¿ç”¨ä»‹ç»</span></h1>
<blockquote>
<p>è½¬è‡ªï¼š<a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.ityouknow.com/docker/2018/03/12/docker-use-dockerfile.html">Docker(äºŒ)ï¼šDockerfile ä½¿ç”¨ä»‹ç»</a>ï¼Œ æ€•ä»¥åæ‰¾ä¸åˆ°</p>
</blockquote>
<h2 id="Dockerfile-æ¦‚å¿µ"><a href="#Dockerfile-æ¦‚å¿µ" class="headerlink" title="Dockerfile æ¦‚å¿µ"></a>Dockerfile æ¦‚å¿µ</h2><p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p>
<p>é•œåƒçš„å®šåˆ¶å®é™…ä¸Šå°±æ˜¯å®šåˆ¶æ¯ä¸€å±‚æ‰€æ·»åŠ çš„é…ç½®ã€æ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€å±‚ä¿®æ”¹ã€å®‰è£…ã€æ„å»ºã€æ“ä½œçš„å‘½ä»¤éƒ½å†™å…¥ä¸€ä¸ªè„šæœ¬ï¼Œç”¨è¿™ä¸ªè„šæœ¬æ¥æ„å»ºã€å®šåˆ¶é•œåƒï¼Œé‚£ä¹ˆä¹‹å‰æåŠçš„æ— æ³•é‡å¤çš„é—®é¢˜ã€é•œåƒæ„å»ºé€æ˜æ€§çš„é—®é¢˜ã€ä½“ç§¯çš„é—®é¢˜å°±éƒ½ä¼šè§£å†³ã€‚è¿™ä¸ªè„šæœ¬å°±æ˜¯ Dockerfileã€‚</p>
<p>Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å†…åŒ…å«äº†ä¸€æ¡æ¡çš„æŒ‡ä»¤(Instruction)ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚æœ‰äº† Dockerfileï¼Œå½“æˆ‘ä»¬éœ€è¦å®šåˆ¶è‡ªå·±é¢å¤–çš„éœ€æ±‚æ—¶ï¼Œåªéœ€åœ¨ Dockerfile ä¸Šæ·»åŠ æˆ–è€…ä¿®æ”¹æŒ‡ä»¤ï¼Œé‡æ–°ç”Ÿæˆ image å³å¯ï¼Œçœå»äº†æ•²å‘½ä»¤çš„éº»çƒ¦ã€‚</p>
<h2 id="Dockerfile-æ–‡ä»¶æ ¼å¼"><a href="#Dockerfile-æ–‡ä»¶æ ¼å¼" class="headerlink" title="Dockerfile æ–‡ä»¶æ ¼å¼"></a>Dockerfile æ–‡ä»¶æ ¼å¼</h2><p>Dockerfileæ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">##  Dockerfileæ–‡ä»¶æ ¼å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This dockerfile uses the ubuntu image</span></span><br><span class="line"><span class="comment"># VERSION 2 - EDITION 1</span></span><br><span class="line"><span class="comment"># Author: docker_user</span></span><br><span class="line"><span class="comment"># Command format: Instruction [arguments / command] ..</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 1ã€ç¬¬ä¸€è¡Œå¿…é¡»æŒ‡å®š åŸºç¡€é•œåƒä¿¡æ¯</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 2ã€ç»´æŠ¤è€…ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> docker_user docker_user@email.com</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 3ã€é•œåƒæ“ä½œæŒ‡ä»¤</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;deb http://archive.ubuntu.com/ubuntu/ raring main universe&quot;</span> &gt;&gt; /etc/apt/sources.list</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y nginx</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;\ndaemon off;&quot;</span> &gt;&gt; /etc/nginx/nginx.conf</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 4ã€å®¹å™¨å¯åŠ¨æ‰§è¡ŒæŒ‡ä»¤</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /usr/sbin/nginx</span></span><br></pre></td></tr></table></figure>

<p>Dockerfile åˆ†ä¸ºå››éƒ¨åˆ†ï¼š<strong>åŸºç¡€é•œåƒä¿¡æ¯ã€ç»´æŠ¤è€…ä¿¡æ¯ã€é•œåƒæ“ä½œæŒ‡ä»¤ã€å®¹å™¨å¯åŠ¨æ‰§è¡ŒæŒ‡ä»¤</strong>ã€‚ä¸€å¼€å§‹å¿…é¡»è¦æŒ‡æ˜æ‰€åŸºäºçš„é•œåƒåç§°ï¼Œæ¥ä¸‹æ¥ä¸€èˆ¬ä¼šè¯´æ˜ç»´æŠ¤è€…ä¿¡æ¯ï¼›åé¢åˆ™æ˜¯é•œåƒæ“ä½œæŒ‡ä»¤ï¼Œä¾‹å¦‚ RUN æŒ‡ä»¤ã€‚æ¯æ‰§è¡Œä¸€æ¡RUN æŒ‡ä»¤ï¼Œé•œåƒæ·»åŠ æ–°çš„ä¸€å±‚ï¼Œå¹¶æäº¤ï¼›æœ€åæ˜¯ CMD æŒ‡ä»¤ï¼Œæ¥æŒ‡æ˜è¿è¡Œå®¹å™¨æ—¶çš„æ“ä½œå‘½ä»¤ã€‚</p>
<h2 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h2><p>docker build å‘½ä»¤ä¼šæ ¹æ® Dockerfile æ–‡ä»¶åŠä¸Šä¸‹æ–‡æ„å»ºæ–° Docker é•œåƒã€‚æ„å»ºä¸Šä¸‹æ–‡æ˜¯æŒ‡ Dockerfile æ‰€åœ¨çš„æœ¬åœ°è·¯å¾„æˆ–ä¸€ä¸ªURLï¼ˆGitä»“åº“åœ°å€ï¼‰ã€‚æ„å»ºä¸Šä¸‹æ–‡ç¯å¢ƒä¼šè¢«é€’å½’å¤„ç†ï¼Œæ‰€ä»¥æ„å»ºæ‰€æŒ‡å®šçš„è·¯å¾„è¿˜åŒ…æ‹¬äº†å­ç›®å½•ï¼Œè€ŒURLè¿˜åŒ…æ‹¬äº†å…¶ä¸­æŒ‡å®šçš„å­æ¨¡å—ã€‚</p>
<p>å°†å½“å‰ç›®å½•åšä¸ºæ„å»ºä¸Šä¸‹æ–‡æ—¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨docker buildå‘½ä»¤æ„å»ºé•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build .</span><br><span class="line">Sending build context to Docker daemon  6.51 MB</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼šæ„å»ºä¼šåœ¨ Docker åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯<code>CLI</code>ä¸­ã€‚æ„å»ºå‰ï¼Œæ„å»ºè¿›ç¨‹ä¼šå°†å…¨éƒ¨å†…å®¹ï¼ˆé€’å½’ï¼‰å‘é€åˆ°å®ˆæŠ¤è¿›ç¨‹ã€‚å¤§å¤šæƒ…å†µä¸‹ï¼Œåº”è¯¥å°†ä¸€ä¸ªç©ºç›®å½•ä½œä¸ºæ„å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¹¶å°† Dockerfile æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚</p>
<p>åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨çš„ Dockerfile æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªæ„å»ºæŒ‡ä»¤æ–‡ä»¶ã€‚ä¸ºäº†æé«˜æ„å»ºæ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡<code>.dockerignore</code>æ–‡ä»¶æ’é™¤ä¸Šä¸‹æ–‡ç›®å½•ä¸‹ä¸éœ€è¦çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<p>åœ¨ Docker æ„å»ºé•œåƒçš„ç¬¬ä¸€æ­¥ï¼Œdocker CLI ä¼šå…ˆåœ¨ä¸Šä¸‹æ–‡ç›®å½•ä¸­å¯»æ‰¾<code>.dockerignore</code>æ–‡ä»¶ï¼Œæ ¹æ®<code>.dockerignore</code> æ–‡ä»¶æ’é™¤ä¸Šä¸‹æ–‡ç›®å½•ä¸­çš„éƒ¨åˆ†æ–‡ä»¶å’Œç›®å½•ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ–‡ä»¶å’Œç›®å½•ä¼ é€’ç»™ Docker æœåŠ¡ã€‚</p>
<p>Dockerfile ä¸€èˆ¬ä½äºæ„å»ºä¸Šä¸‹æ–‡çš„æ ¹ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>-f</code>æŒ‡å®šè¯¥æ–‡ä»¶çš„ä½ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -f /path/to/a/Dockerfile .</span><br></pre></td></tr></table></figure>

<p>æ„å»ºæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>-t</code>å‚æ•°æŒ‡å®šæ„å»ºæˆé•œåƒçš„ä»“åº“ã€æ ‡ç­¾ã€‚</p>
<h2 id="é•œåƒæ ‡ç­¾"><a href="#é•œåƒæ ‡ç­¾" class="headerlink" title="é•œåƒæ ‡ç­¾"></a>é•œåƒæ ‡ç­¾</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t nginx/v3 .</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå­˜åœ¨å¤šä¸ªä»“åº“ä¸‹ï¼Œæˆ–ä½¿ç”¨å¤šä¸ªé•œåƒæ ‡ç­¾ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šä¸ª<code>-t</code>å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t nginx/v3:1.0.2 -t nginx/v3:latest .</span><br></pre></td></tr></table></figure>

<p>åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤å‰ï¼Œé¦–å…ˆä¼šå¯¹ Dockerfile è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œæœ‰è¯­æ³•é”™è¯¯æ—¶ä¼šè¿”å›ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t nginx/v3 .</span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">Error response from daemon: Unknown instruction: RUNCMD</span><br></pre></td></tr></table></figure>

<h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><p>Docker å®ˆæŠ¤è¿›ç¨‹ä¼šä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤ï¼Œè€Œä¸”ä¼šåœ¨æ¯ä¸€æ­¥æäº¤å¹¶ç”Ÿæˆä¸€ä¸ªæ–°é•œåƒï¼Œæœ€åä¼šè¾“å‡ºæœ€ç»ˆé•œåƒçš„IDã€‚ç”Ÿæˆå®Œæˆåï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹ä¼šè‡ªåŠ¨æ¸…ç†ä½ å‘é€çš„ä¸Šä¸‹æ–‡ã€‚ Dockerfileæ–‡ä»¶ä¸­çš„æ¯æ¡æŒ‡ä»¤ä¼šè¢«ç‹¬ç«‹æ‰§è¡Œï¼Œå¹¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°é•œåƒï¼ŒRUN cd /tmpç­‰å‘½ä»¤ä¸ä¼šå¯¹ä¸‹æ¡æŒ‡ä»¤äº§ç”Ÿå½±å“ã€‚ Docker ä¼šé‡ç”¨å·²ç”Ÿæˆçš„ä¸­é—´é•œåƒï¼Œä»¥åŠ é€Ÿdocker buildçš„æ„å»ºé€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨äº†ç¼“å­˜é•œåƒçš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t svendowideit/ambassador .</span><br><span class="line">Sending build context to Docker daemon 15.36 kB</span><br><span class="line">Step 1/4 : FROM alpine:3.2</span><br><span class="line"> ---&gt; 31f630c65071</span><br><span class="line">Step 2/4 : MAINTAINER SvenDowideit@home.org.au</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 2a1c91448f5f</span><br><span class="line">Step 3/4 : RUN apk update &amp;&amp;      apk add socat &amp;&amp;        rm -r /var/cache/</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 21ed6e7fbb73</span><br><span class="line">Step 4/4 : CMD env | grep _TCP= | (sed <span class="string">&#x27;s/.*_PORT_\([0-9]*\)_TCP=tcp:\/\/\(.*\):\(.*\)/socat -t 100000000 TCP4-LISTEN:\1,fork,reuseaddr TCP4:\2:\3 \&amp;/&#x27;</span> &amp;&amp; <span class="built_in">echo</span> <span class="built_in">wait</span>) | sh</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 7ea8aef582cc</span><br><span class="line">Successfully built 7ea8aef582cc</span><br></pre></td></tr></table></figure>

<p>æ„å»ºç¼“å­˜ä»…ä¼šä½¿ç”¨æœ¬åœ°çˆ¶ç”Ÿæˆé“¾ä¸Šçš„é•œåƒï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„é•œåƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>--cache-from</code>æŒ‡å®šç¼“å­˜ã€‚æŒ‡å®šåå°†ä¸å†ä½¿ç”¨æœ¬åœ°ç”Ÿæˆçš„é•œåƒé“¾ï¼Œè€Œæ˜¯ä»é•œåƒä»“åº“ä¸­ä¸‹è½½ã€‚</p>
<h2 id="å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘"><a href="#å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘" class="headerlink" title="å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘"></a>å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘</h2><p>Docker å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘å…¶å®å°±æ˜¯æ ‘å‹ç»“æ„æ ¹æ® Dockerfile æŒ‡ä»¤éå†å­èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚ä¸‹å›¾å¯ä»¥è¯´æ˜è¿™ä¸ªé€»è¾‘ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">     FROM base_image:version           Dockerfile:</span><br><span class="line">           +----------+                FROM base_image:version</span><br><span class="line">           |base image|                RUN cmd1  --&gt; use cache because we found base image</span><br><span class="line">           +-----X----+                RUN cmd11 --&gt; use cache because we found cmd1</span><br><span class="line">                / \</span><br><span class="line">               /   \</span><br><span class="line">       RUN cmd1     RUN cmd2           Dockerfile:</span><br><span class="line">       +------+     +------+           FROM base_image:version</span><br><span class="line">       |image1|     |image2|           RUN cmd2  --&gt; use cache because we found base image</span><br><span class="line">       +---X--+     +------+           RUN cmd21 --&gt; not use cache because there<span class="string">&#x27;s no child node</span></span><br><span class="line"><span class="string">          / \                                        running cmd21, so we build a new image here</span></span><br><span class="line"><span class="string">         /   \</span></span><br><span class="line"><span class="string">RUN cmd11     RUN cmd12</span></span><br><span class="line"><span class="string">+-------+     +-------+</span></span><br><span class="line"><span class="string">|image11|     |image12|</span></span><br><span class="line"><span class="string">+-------+     +-------+</span></span><br></pre></td></tr></table></figure>

<p>å¤§éƒ¨åˆ†æŒ‡ä»¤å¯ä»¥æ ¹æ®ä¸Šè¿°é€»è¾‘å»å¯»æ‰¾ç¼“å­˜ï¼Œé™¤äº† ADD å’Œ COPY ã€‚è¿™ä¸¤ä¸ªæŒ‡ä»¤ä¼šå¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°é•œåƒå†…ï¼Œé™¤äº†æŒ‡ä»¤ç›¸åŒä»¥å¤–ï¼ŒDocker è¿˜ä¼šæ£€æŸ¥æ¯ä¸ªæ–‡ä»¶å†…å®¹æ ¡éªŒ(ä¸åŒ…æ‹¬æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´)ï¼Œå¦‚æœæ ¡éªŒä¸ä¸€è‡´ï¼Œåˆ™ä¸ä¼šä½¿ç”¨ç¼“å­˜ã€‚</p>
<p>é™¤äº†è¿™ä¸¤ä¸ªå‘½ä»¤ï¼ŒDocker å¹¶ä¸ä¼šå»æ£€æŸ¥å®¹å™¨å†…çš„æ–‡ä»¶å†…å®¹ï¼Œæ¯”å¦‚ <code>RUN apt-get -y update</code>ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶æ–‡ä»¶å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯ Docker è®¤ä¸ºå‘½ä»¤ä¸€è‡´ï¼Œä¼šç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»¥åæ„å»ºæ—¶éƒ½ä¸ä¼šå†é‡æ–°è¿è¡Œ<code>apt-get -y update</code>ã€‚</p>
<p>å¦‚æœ Docker æ²¡æœ‰æ‰¾åˆ°å½“å‰æŒ‡ä»¤çš„ç¼“å­˜ï¼Œåˆ™ä¼šæ„å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶ä¸”ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤éƒ½ä¸ä¼šå†å»å¯»æ‰¾ç¼“å­˜ã€‚</p>
<h2 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h2><p>æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥æ„Ÿå—ä¸€ä¸‹ Dockerfile æ˜¯å¦‚ä½•ç”¨æ¥æ„å»ºé•œåƒå¯åŠ¨å®¹å™¨ã€‚æˆ‘ä»¬ä»¥å®šåˆ¶ nginx é•œåƒä¸ºä¾‹ï¼Œåœ¨ä¸€ä¸ªç©ºç™½ç›®å½•ä¸­ï¼Œå»ºç«‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶å‘½åä¸º Dockerfileï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir mynginx</span><br><span class="line"><span class="built_in">cd</span> mynginx</span><br><span class="line">vi Dockerfile</span><br></pre></td></tr></table></figure>

<p>æ„å»ºä¸€ä¸ª Dockerfile æ–‡ä»¶å†…å®¹ä¸ºï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&#x27;&lt;h1&gt;Hello, Docker!&lt;/h1&gt;&#x27;</span> &gt; /usr/share/nginx/html/index.html</span></span><br><span class="line">vi Dockerfile</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª Dockerfile å¾ˆç®€å•ï¼Œä¸€å…±å°±ä¸¤è¡Œæ¶‰åŠåˆ°äº†ä¸¤æ¡æŒ‡ä»¤ï¼šFROM å’Œ RUNï¼ŒFROM è¡¨ç¤ºè·å–æŒ‡å®šåŸºç¡€é•œåƒï¼ŒRUN æ‰§è¡Œå‘½ä»¤ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­é‡å†™äº† nginx çš„é»˜è®¤é¡µé¢ä¿¡æ¯ï¼Œå°†ä¿¡æ¯æ›¿æ¢ä¸ºï¼šHello, Docker!ã€‚</p>
<p>åœ¨ Dockerfile æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t nginx:v1 .</span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤æœ€åæœ‰ä¸€ä¸ª. è¡¨ç¤ºå½“å‰ç›®å½•</p>
<p>æ„å»ºå®Œæˆä¹‹åï¼Œä½¿ç”¨ <code>docker images</code> å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰é•œåƒï¼Œå¦‚æœå­˜åœ¨ REPOSITORY ä¸º nginx å’Œ TAG æ˜¯ v1 çš„ä¿¡æ¯ï¼Œå°±è¡¨ç¤ºæ„å»ºæˆåŠŸã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br><span class="line">REPOSITORY                      TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                           v1                  8c92471de2cc        6 minutes ago       108.6 MB</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ä½¿ç”¨ docker run å‘½ä»¤æ¥å¯åŠ¨å®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run  --name docker_nginx_v1   -d -p 80:80 nginx:v1</span><br></pre></td></tr></table></figure>

<p>è¿™æ¡å‘½ä»¤ä¼šç”¨ nginx é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‘½åä¸º<code>docker_nginx_v1</code>ï¼Œå¹¶ä¸”æ˜ å°„äº† 80 ç«¯å£ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ç”¨æµè§ˆå™¨å»è®¿é—®è¿™ä¸ª nginx æœåŠ¡å™¨ï¼š<code>http://192.168.0.54/</code>ï¼Œé¡µé¢è¿”å›ä¿¡æ¯ï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://github.com/cayzlh/git-img-repository/raw/master/blog/2019/09/19.png" alt="img"></p>
<p>è¿™æ ·ä¸€ä¸ªç®€å•ä½¿ç”¨ Dockerfile æ„å»ºé•œåƒï¼Œè¿è¡Œå®¹å™¨çš„ç¤ºä¾‹å°±å®Œæˆäº†ï¼</p>
<h2 id="ä¿®æ”¹å®¹å™¨å†…å®¹"><a href="#ä¿®æ”¹å®¹å™¨å†…å®¹" class="headerlink" title="ä¿®æ”¹å®¹å™¨å†…å®¹"></a>ä¿®æ”¹å®¹å™¨å†…å®¹</h2><p>å®¹å™¨å¯åŠ¨åï¼Œéœ€è¦å¯¹å®¹å™¨å†…çš„æ–‡ä»¶è¿›è¡Œè¿›ä¸€æ­¥çš„å®Œå–„ï¼Œå¯ä»¥ä½¿ç”¨<code>docker exec -it xx bash</code>å‘½ä»¤å†æ¬¡è¿›è¡Œä¿®æ”¹ï¼Œä»¥ä¸Šé¢çš„ç¤ºä¾‹ä¸ºåŸºç¡€ï¼Œä¿®æ”¹ nginx å¯åŠ¨é¡µé¢å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker exec -it docker_nginx_v1   bash</span><br><span class="line">root@3729b97e8226:&#x2F;# echo &#39;&lt;h1&gt;Hello, Docker neo!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line">root@3729b97e8226:&#x2F;# exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<p>ä»¥äº¤äº’å¼ç»ˆç«¯æ–¹å¼è¿›å…¥ docker_nginx_v1 å®¹å™¨ï¼Œå¹¶æ‰§è¡Œäº† bash å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è·å¾—ä¸€ä¸ªå¯æ“ä½œçš„ Shellã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨<code>&lt;h1&gt;Hello, Docker neo!&lt;/h1&gt;</code>è¦†ç›–äº† <code>/usr/share/nginx/html/index.html</code> çš„å†…å®¹ã€‚</p>
<p>å†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œä¼šå‘ç°å†…å®¹è¢«æ”¹å˜ã€‚</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://github.com/cayzlh/git-img-repository/raw/master/blog/2019/09/20.png" alt="img"></p>
<p>ä¿®æ”¹äº†å®¹å™¨çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ”¹åŠ¨äº†å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œå¯ä»¥é€šè¿‡ docker diff å‘½ä»¤çœ‹åˆ°å…·ä½“çš„æ”¹åŠ¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker diff docker_nginx_v1 </span><br><span class="line">... </span><br></pre></td></tr></table></figure>

<div class="article-footer fs14"><section id="license"><div class="header"><span>è®¸å¯åè®®</span></div><div class="body"><p>æœ¬æ–‡é‡‡ç”¨ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div></section></div>

</article>

<div class="related-wrap" id="read-next"><section class="header cap theme"><span>æ¥ä¸‹æ¥é˜…è¯»</span></section><section class="body"><div class="post-title h2"><a href="/post/3351059309/">Redisçš„ä½¿ç”¨åœºæ™¯</a></div><div class="post-title fs14"><a href="/post/2644493537/">ä¸Šä¸€ç¯‡ï¼šDockerfileå¸¸ç”¨æŒ‡ä»¤</a></div></section></div>


<div class="related-wrap" id="related-posts">
    <section class="header">
      <div class="title cap theme">æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« </div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/post/2644493537/" title="Dockerfileå¸¸ç”¨æŒ‡ä»¤"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cayzlh/git-img-repository@master/2021/04/14194816180355881618035588178.png"></div><span class="title">Dockerfileå¸¸ç”¨æŒ‡ä»¤</span><span class="excerpt">Dockerä¸ºæˆ‘ä»¬æä¾›äº†Dockerfileæ¥è§£å†³è‡ªåŠ¨åŒ–çš„é—®é¢˜ã€‚DockerfileåŒ…å«åˆ›å»ºé•œåƒæ‰€éœ€è¦çš„å…¨éƒ¨æŒ‡ä»¤ã€‚åŸºäºåœ¨Dockerfileä¸­çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Docker buildå‘½ä»¤æ¥åˆ›å»ºé•œåƒã€‚é€šè¿‡å‡å°‘é•œåƒå’Œå®¹å™¨çš„åˆ›å»ºè¿‡ç¨‹æ¥ç®€...</span></a><a class="item" href="/post/2481829941/" title="Dockeréƒ¨ç½²elasticsearch"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gitee.com/cayzlh/img-repo/raw/master/2021/01/11334316098176231609817623882.png"></div><span class="title">Dockeréƒ¨ç½²elasticsearch</span><span class="excerpt">è®°ä¸€æ¬¡Dokceréƒ¨ç½²elasticsearchçš„è¿‡ç¨‹ä¸é”™è¯¯è§£å†³ã€‚</span></a><a class="item" href="/post/656e6847/" title="Docker Swarm"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://github.com/cayzlh/git-img-repository/raw/master/blog/2019/09/22.png"></div><span class="title">Docker Swarm</span><span class="excerpt">å®è·µä¸­ä¼šå‘ç°ï¼Œç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å•ä¸ª Docker èŠ‚ç‚¹æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ­å»º Docker é›†ç¾¤åŠ¿åœ¨å¿…è¡Œã€‚ç„¶è€Œï¼Œé¢å¯¹ Kubernetes, Mesos ä»¥åŠ Swarm ç­‰ä¼—å¤šå®¹å™¨é›†ç¾¤ç³»ç»Ÿï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿå®ƒä»¬ä¹‹ä¸­ï¼ŒSwarm æ˜¯ Do...</span></a><a class="item" href="/post/2311352951/" title="ä½¿ç”¨Docker Compose"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://github.com/cayzlh/git-img-repository/raw/master/blog/2019/09/19.png"></div><span class="title">ä½¿ç”¨Docker Compose</span><span class="excerpt">Docker-Compose æ˜¯ Docker çš„ä¸€ç§ç¼–æ’æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªç”¨äºåœ¨ Docker ä¸Šå®šä¹‰å¹¶è¿è¡Œå¤æ‚åº”ç”¨çš„å·¥å…·ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨é›†ç¾¤ä¸­éƒ¨ç½²åˆ†å¸ƒå¼åº”ç”¨</span></a><a class="item" href="/post/20210402/" title="HomeBrewæ¢æº"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cayzlh/git-img-repository@master/2021/04/22285116180649311618064931741.jpg"></div><span class="title">HomeBrewæ¢æº</span><span class="excerpt">HomeBrewæ¢æº</span></a></div></section></div>



  <div class="related-wrap md" id="comments">
    <div class="cmt-title cap theme">
      å¿«æ¥å‚ä¸è®¨è®ºå§
    </div>
    <div class="cmt-body utterances">
      

<svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"/></svg>

<div id="utterances" repo="cayzlh/studious-barnacle" issue-term="pathname" theme="github-light"></div>

    </div>
  </div>



      
<footer class="page-footer fs12" style="text-align: center;"><hr><div><p><a href="https://www.cayzlh.com/">ğŸ³Antä¸¶</a> Â©ï¸ 2017-2021</p>
<p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://beian.miit.gov.cn/">ç²¤ICPå¤‡20058712å·</a></p>
</div></footer>

      <div class="float-panel mobile-only" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" viewbox="0 0 1228 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2849"><path d="M0 0m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2850"/><path d="M0 389.560798m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.3902l-973.901995 0q-97.390199 0-97.390199-97.3902l0 0q0-97.390199 97.390199-97.390199Z" p-id="2851"/><path d="M0 779.121596m97.390199 0l973.901995 0q97.390199 0 97.390199 97.390199l0 0q0 97.390199-97.390199 97.390199l-973.901995 0q-97.390199 0-97.390199-97.390199l0 0q0-97.390199 97.390199-97.390199Z" p-id="2852"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script')
      script.src = src
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.1.0';
  stellar.config = {
    date_suffix: {
      just: 'åˆšåˆš',
      min: 'åˆ†é’Ÿå‰',
      hour: 'å°æ—¶å‰',
      day: 'å¤©å‰',
      month: 'ä¸ªæœˆå‰',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper/swiper-bundle.min.css","js":"https://unpkg.com/swiper/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function utterances(){
    if(!document.getElementById("utterances"))return;
    setTimeout(function() {
      var checkUtterances = setInterval(function () {
        var el = document.getElementById("utterances");
        if (!el) return
        clearInterval(checkUtterances)
        try {
          el.innerHTML="";
        } catch (error) {}
        var script = document.createElement('script');
        script.src = 'https://utteranc.es/client.js';
        const keys = ['repo', 'issue-term', 'issue-number', 'theme', 'label', 'crossorigin'];
        keys.forEach((key, i) => {
          if (el.attributes[key] && el.attributes[key].value) {
            script.setAttribute(key, el.attributes[key].value);
          }
        });
        el.appendChild(script);
       }, 200)
    });
  }
  utterances();
</script>




<!-- inject -->


  </div>
</body>
</html>
